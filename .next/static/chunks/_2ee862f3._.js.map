{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/utils/analysisEngine.ts"],"sourcesContent":["\r\nimport { TableData } from '../types/chat';\r\n\r\nexport const executeSQL = async (query: string, data: TableData): Promise<{ type: 'table' | 'text' | 'error', data: TableData | string }> => {\r\n  return new Promise((resolve) => {\r\n    try {\r\n      // Access alasql from window since it's loaded via CDN\r\n      const alasql = (window as any).alasql;\r\n      \r\n      if (!alasql) {\r\n        resolve({ type: 'error', data: \"Analysis Engine (AlaSQL) not loaded.\" });\r\n        return;\r\n      }\r\n\r\n      // Polyfill strftime if it doesn't exist (commonly used by models trained on SQLite)\r\n      if (!alasql.fn.strftime) {\r\n        alasql.fn.strftime = (format: string, dateStr: string) => {\r\n          const date = new Date(dateStr);\r\n          if (isNaN(date.getTime())) return dateStr;\r\n          \r\n          return format\r\n            .replace('%Y', date.getFullYear().toString())\r\n            .replace('%m', (date.getMonth() + 1).toString().padStart(2, '0'))\r\n            .replace('%d', date.getDate().toString().padStart(2, '0'))\r\n            .replace('%H', date.getHours().toString().padStart(2, '0'))\r\n            .replace('%M', date.getMinutes().toString().padStart(2, '0'))\r\n            .replace('%S', date.getSeconds().toString().padStart(2, '0'))\r\n            .replace('%j', Math.floor((date.getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000).toString().padStart(3, '0'))\r\n            .replace('%w', date.getDay().toString());\r\n        };\r\n      }\r\n\r\n      // Polyfill string_split (Fix for: alasql.fn.string_split is not a function)\r\n      if (!alasql.fn.string_split) {\r\n        alasql.fn.string_split = (str: string, delimiter: string) => {\r\n          if (typeof str !== 'string') return [];\r\n          return str.split(delimiter || ',');\r\n        };\r\n      }\r\n\r\n      // Polyfill json_extract (often used by Gemini for complex data)\r\n      if (!alasql.fn.json_extract) {\r\n        alasql.fn.json_extract = (jsonStr: string, path: string) => {\r\n          try {\r\n            const obj = JSON.parse(jsonStr);\r\n            // Very simple path handler: $.key\r\n            const key = path.replace('$.', '');\r\n            return obj[key];\r\n          } catch {\r\n            return null;\r\n          }\r\n        };\r\n      }\r\n\r\n      if (!data || !data.rows) {\r\n        resolve({ type: 'error', data: \"No active dataset found for analysis.\" });\r\n        return;\r\n      }\r\n\r\n      // Pre-check for forbidden/unsupported commands\r\n      if (query.trim().toLowerCase().startsWith('pragma')) {\r\n         resolve({ \r\n            type: 'text', \r\n            data: \"Schema inspection via PRAGMA is not supported. Please refer to the table context provided above for column names.\" \r\n         });\r\n         return;\r\n      }\r\n\r\n      // Clean the query: Remove quotes around 'data' table name to prevent param substitution failure\r\n      const cleanQuery = query.replace(/\"data\"/gi, 'data').replace(/'data'/gi, 'data');\r\n\r\n      // Replace 'data' keyword with AlaSQL parameter placeholder '?'\r\n      const executableSql = cleanQuery.replace(/\\bdata\\b/gi, '?');\r\n\r\n      // Count parameters needed (occurrences of ?)\r\n      const paramCount = (executableSql.match(/\\?/g) || []).length;\r\n      \r\n      // Pass the rows as the parameter for every occurrence of ?\r\n      const params = paramCount > 0 ? Array(paramCount).fill(data.rows) : [];\r\n\r\n      // Create a safe execution environment\r\n      const result = alasql(executableSql, params);\r\n\r\n      if (Array.isArray(result) && result.length > 0) {\r\n        // If result is an array of objects, format as TableData\r\n        if (typeof result[0] === 'object' && result[0] !== null) {\r\n           const headers = Object.keys(result[0]);\r\n           const rows = result.map((r: any, i: number) => ({ ...r, id: `res-${i}` }));\r\n           resolve({ \r\n             type: 'table', \r\n             data: { headers, rows } \r\n           });\r\n        } else {\r\n           // Array of primitives?\r\n           resolve({ type: 'text', data: JSON.stringify(result, null, 2) });\r\n        }\r\n      } else if (Array.isArray(result) && result.length === 0) {\r\n        resolve({ type: 'text', data: \"No results found.\" });\r\n      } else {\r\n         // Scalar result or other\r\n         resolve({ type: 'text', data: String(result) });\r\n      }\r\n\r\n    } catch (e: any) {\r\n      console.error(\"SQL Execution Error:\", e);\r\n      let msg = e.message || \"Execution failed\";\r\n      if (msg.includes(\"Parse error\")) {\r\n          msg = `Syntax Error: ${msg}. Please ensure keywords are spaced correctly and aliases use snake_case (e.g., AS total_sales).`;\r\n      }\r\n      resolve({ type: 'error', data: msg });\r\n    }\r\n  });\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/hooks/useChatSession.ts"],"sourcesContent":["\r\nimport { useState } from 'react';\r\nimport { GoogleGenAI } from \"@google/genai\";\r\nimport { Message, ModelOption, Attachment } from '../types/chat';\r\nimport { executeSQL } from '../utils/analysisEngine';\r\n\r\ninterface UseChatProps {\r\n  selectedModel: ModelOption;\r\n  useSearch: boolean;\r\n  isAnalyzeMode: boolean;\r\n}\r\n\r\nexport const useChatSession = ({ selectedModel, useSearch, isAnalyzeMode }: UseChatProps) => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [suggestions, setSuggestions] = useState<string[]>([]);\r\n  const [isSuggestionsLoading, setIsSuggestionsLoading] = useState(false);\r\n\r\n  const findActiveData = (history: Message[]) => {\r\n    for (let i = history.length - 1; i >= 0; i--) {\r\n      const att = history[i].attachments?.find(a => a.tableData);\r\n      if (att) return att;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const generateSuggestions = async (history: Message[]) => {\r\n    try {\r\n      setIsSuggestionsLoading(true);\r\n      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n      const lastMsgs = history.slice(-4).map(m => `${m.role}: ${m.text}`).join('\\n');\r\n      const hasData = !!findActiveData(history);\r\n\r\n      const prompt = `\r\n        Based on the conversation history below, generate 3 short, proactive, and intelligent follow-up options for the user.\r\n        Context:\r\n        - User has data loaded: ${hasData}\r\n        - Conversation:\r\n        ${lastMsgs}\r\n        Rules:\r\n        1. If data is present, suggest specific analysis (e.g., \"Visualize sales trends\", \"Find top performers\").\r\n        2. Keep suggestions under 6 words.\r\n        4. Return ONLY a raw JSON array of strings.\r\n      `;\r\n\r\n      const response = await ai.models.generateContent({\r\n        model: 'gemini-3-flash-preview',\r\n        contents: prompt,\r\n        config: { responseMimeType: 'application/json' }\r\n      });\r\n\r\n      const parsed = JSON.parse(response.text || '[]');\r\n      if (Array.isArray(parsed)) {\r\n        setSuggestions(parsed.slice(0, 3));\r\n      }\r\n    } catch (e) {\r\n      console.warn(\"Failed to generate suggestions\", e);\r\n    } finally {\r\n      setIsSuggestionsLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateResponse = async (history: Message[]) => {\r\n    try {\r\n      setIsGenerating(true);\r\n      setSuggestions([]);\r\n\r\n      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n      const activeAttachment = findActiveData(history);\r\n      const hasData = !!activeAttachment;\r\n\r\n      // Base instruction\r\n      let systemInstruction = \"You are a helpful, intelligent AI assistant.\";\r\n\r\n      // Data Analysis Instruction (Active whenever data is present, regardless of mode toggle)\r\n      if (hasData) {\r\n        const cols = activeAttachment?.tableData?.headers.join(', ');\r\n        systemInstruction = `\r\nYou are an expert Data Analyst. The user has uploaded a dataset with columns: [${cols}].\r\nThe dataset is available in a SQL table named 'data'.\r\n\r\n**VISUALIZATION LOGIC (STRICT):**\r\n1. **Prioritize Value:** Only generate a chart if it reveals meaningful trends, distributions, or comparisons.\r\n2. **Skip Trivial Charts:** DO NOT generate charts for single values (scalars), simple text lists, or very small datasets (less than 3 data points) unless explicitly requested.\r\n3. **Format:** If a chart is valuable, output <visual_type>bar|line|pie|area</visual_type> immediately after the SQL block.\r\n\r\n**OUTPUT FORMATTING:**\r\n- **Scalars:** If the result is a single number (e.g., \"Total Sales\"), write the SQL to calculate it. The system will display it as a statistic. Do not generate a chart.\r\n- **Tables:** Only imply a table output (by not adding a visual tag) if the user needs to explore raw rows or a detailed list.\r\n- **Text:** Always provide a brief text analysis explaining the result *before* or *after* the code block.\r\n\r\n**SQL RULES:**\r\n- Use markdown blocks: \\`\\`\\`sql ... \\`\\`\\`.\r\n- Use snake_case for aliases.\r\n- Use 'data' as the table name.\r\n`;\r\n      } else if (isAnalyzeMode) {\r\n        systemInstruction = \"You are an expert data analyst. Provide deep, structured analysis and reasoning.\";\r\n      }\r\n\r\n      const tools = (useSearch && !hasData) ? [{ googleSearch: {} }] : undefined;\r\n      const modelId = (useSearch && selectedModel.id.includes('lite')) ? 'gemini-flash-lite-latest' : selectedModel.id;\r\n\r\n      const aiMsgId = (Date.now() + 1).toString();\r\n      const modelMsg: Message = { id: aiMsgId, role: 'model', text: '', isStreaming: true, timestamp: new Date() };\r\n      setMessages(prev => [...prev, modelMsg]);\r\n\r\n      const contents = history.map(m => {\r\n        const parts: any[] = [{ text: m.text }];\r\n        if (m.attachments) {\r\n          m.attachments.forEach(a => {\r\n            if (a.mimeType.startsWith('image/')) {\r\n              const base64Data = a.base64.split(',')[1];\r\n              parts.push({ inlineData: { mimeType: a.mimeType, data: base64Data } });\r\n            } else if (a.tableData) {\r\n              const headerInfo = a.tableData.headers.join(', ');\r\n              const rowPreview = JSON.stringify(a.tableData.rows.slice(0, 3));\r\n              parts.push({ text: `\\n<file_context>\\nFilename: ${a.name}\\nColumns: ${headerInfo}\\nPreview: ${rowPreview}\\n</file_context>` });\r\n            }\r\n          });\r\n        }\r\n        return { role: m.role, parts };\r\n      });\r\n\r\n      const stream = await ai.models.generateContentStream({\r\n        model: modelId,\r\n        contents,\r\n        config: { tools, systemInstruction }\r\n      });\r\n\r\n      let fullText = '';\r\n      let groundingMetadata: any = null;\r\n\r\n      for await (const chunk of stream) {\r\n        fullText += chunk.text || '';\r\n        if (chunk.candidates?.[0]?.groundingMetadata) groundingMetadata = chunk.candidates[0].groundingMetadata;\r\n        setMessages(prev => prev.map(m => m.id === aiMsgId ? { ...m, text: fullText, groundingMetadata } : m));\r\n      }\r\n\r\n      let executionResults: Record<number, any> = {};\r\n\r\n      if (hasData) {\r\n        const codeBlockRegex = /```(\\w*)\\s*([\\s\\S]*?)```/g;\r\n        let match;\r\n        let index = 0;\r\n\r\n        while ((match = codeBlockRegex.exec(fullText)) !== null) {\r\n          const lang = match[1].toLowerCase();\r\n          const code = match[2].trim();\r\n\r\n          if (lang === 'sql') {\r\n            const result = await executeSQL(code, activeAttachment?.tableData!);\r\n\r\n            // Look for visual hint immediately after this block\r\n            const textAfter = fullText.slice(match.index + match[0].length);\r\n            const visualMatch = textAfter.match(/^\\s*<visual_type>(.*?)<\\/visual_type>/);\r\n\r\n            if (result.type === 'table' && visualMatch) {\r\n              (result as any).visualHint = visualMatch[1].trim();\r\n            }\r\n\r\n            executionResults[index] = result;\r\n          }\r\n          index++;\r\n        }\r\n      }\r\n\r\n      let cleanedText = fullText\r\n        .replace(/<visual_type>.*?<\\/visual_type>/g, '')\r\n        .trim();\r\n\r\n      const finalModelMsg: Message = {\r\n        ...modelMsg,\r\n        text: cleanedText,\r\n        isStreaming: false,\r\n        groundingMetadata,\r\n        executionResults\r\n      };\r\n\r\n      setMessages(prev => prev.map(m => m.id === aiMsgId ? finalModelMsg : m));\r\n      generateSuggestions([...history, finalModelMsg]);\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMessages(prev => [...prev, { id: Date.now().toString(), role: 'model', text: \"Error generating response.\", timestamp: new Date() }]);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleSend = async (text: string, attachments: Attachment[] = []) => {\r\n    if ((!text.trim() && attachments.length === 0) || isGenerating) return;\r\n    const userMsg: Message = { id: Date.now().toString(), role: 'user', text, attachments, timestamp: new Date() };\r\n    const newHistory = messages.concat(userMsg);\r\n    setMessages(newHistory);\r\n    await generateResponse(newHistory);\r\n  };\r\n\r\n  const handleRerun = async (aiMsgId: string) => {\r\n    if (isGenerating) return;\r\n    const idx = messages.findIndex(m => m.id === aiMsgId);\r\n    if (idx === -1) return;\r\n    const newHistory = messages.slice(0, idx);\r\n    setMessages(newHistory);\r\n    await generateResponse(newHistory);\r\n  };\r\n\r\n  const toggleFeedback = (id: string, type: 'like' | 'dislike') => {\r\n    setMessages(prev => prev.map(m => m.id === id ? { ...m, feedback: m.feedback === type ? undefined : type } : m));\r\n  };\r\n\r\n  return { messages, setMessages, isGenerating, suggestions, isSuggestionsLoading, handleSend, handleRerun, toggleFeedback };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/utils/audioHelpers.ts"],"sourcesContent":["\r\nexport function createBlob(data: Float32Array) {\r\n  const l = data.length;\r\n  const int16 = new Int16Array(l);\r\n  for (let i = 0; i < l; i++) {\r\n    int16[i] = data[i] * 32768;\r\n  }\r\n  let binary = '';\r\n  const bytes = new Uint8Array(int16.buffer);\r\n  const len = bytes.byteLength;\r\n  for (let i = 0; i < len; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  return {\r\n    data: btoa(binary),\r\n    mimeType: 'audio/pcm;rate=16000',\r\n  };\r\n}\r\n\r\nexport async function decodeAudioData(base64: string, ctx: AudioContext): Promise<AudioBuffer> {\r\n  const binaryString = atob(base64);\r\n  const len = binaryString.length;\r\n  const bytes = new Uint8Array(len);\r\n  for (let i = 0; i < len; i++) {\r\n    bytes[i] = binaryString.charCodeAt(i);\r\n  }\r\n  const dataInt16 = new Int16Array(bytes.buffer);\r\n  const frameCount = dataInt16.length;\r\n  const buffer = ctx.createBuffer(1, frameCount, 24000);\r\n  const channelData = buffer.getChannelData(0);\r\n  for (let i = 0; i < frameCount; i++) {\r\n    channelData[i] = dataInt16[i] / 32768.0;\r\n  }\r\n  return buffer;\r\n}\r\n"],"names":[],"mappings":";;;;AACO,SAAS,WAAW,IAAkB;IAC3C,MAAM,IAAI,KAAK,MAAM;IACrB,MAAM,QAAQ,IAAI,WAAW;IAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;QAC1B,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG;IACvB;IACA,IAAI,SAAS;IACb,MAAM,QAAQ,IAAI,WAAW,MAAM,MAAM;IACzC,MAAM,MAAM,MAAM,UAAU;IAC5B,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,IAAK;QAC5B,UAAU,OAAO,YAAY,CAAC,KAAK,CAAC,EAAE;IACxC;IACA,OAAO;QACL,MAAM,KAAK;QACX,UAAU;IACZ;AACF;AAEO,eAAe,gBAAgB,MAAc,EAAE,GAAiB;IACrE,MAAM,eAAe,KAAK;IAC1B,MAAM,MAAM,aAAa,MAAM;IAC/B,MAAM,QAAQ,IAAI,WAAW;IAC7B,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,IAAK;QAC5B,KAAK,CAAC,EAAE,GAAG,aAAa,UAAU,CAAC;IACrC;IACA,MAAM,YAAY,IAAI,WAAW,MAAM,MAAM;IAC7C,MAAM,aAAa,UAAU,MAAM;IACnC,MAAM,SAAS,IAAI,YAAY,CAAC,GAAG,YAAY;IAC/C,MAAM,cAAc,OAAO,cAAc,CAAC;IAC1C,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,IAAK;QACnC,WAAW,CAAC,EAAE,GAAG,SAAS,CAAC,EAAE,GAAG;IAClC;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/constants/chat.ts"],"sourcesContent":["\r\nimport { ModelOption } from '../types/chat';\r\n\r\nexport const MODELS: ModelOption[] = [\r\n  { id: 'gemini-3-flash-preview', name: 'Gemini 3.0 Flash', desc: 'Fast & versatile (Default)' },\r\n  { id: 'gemini-3-pro-preview', name: 'Gemini 3.0 Pro', desc: 'Complex reasoning & coding' },\r\n  { id: 'gemini-flash-lite-latest', name: 'Gemini Flash Lite', desc: 'Lowest latency' },\r\n];\r\n\r\nexport const VOICE_CONFIG = {\r\n  model: 'gemini-2.5-flash-native-audio-preview-09-2025',\r\n  voiceName: 'Kore',\r\n};\r\n"],"names":[],"mappings":";;;;AAGO,MAAM,SAAwB;IACnC;QAAE,IAAI;QAA0B,MAAM;QAAoB,MAAM;IAA6B;IAC7F;QAAE,IAAI;QAAwB,MAAM;QAAkB,MAAM;IAA6B;IACzF;QAAE,IAAI;QAA4B,MAAM;QAAqB,MAAM;IAAiB;CACrF;AAEM,MAAM,eAAe;IAC1B,OAAO;IACP,WAAW;AACb","debugId":null}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/hooks/useVoiceSession.ts"],"sourcesContent":["\r\nimport { useState, useRef } from 'react';\r\nimport { GoogleGenAI, LiveServerMessage, Modality } from \"@google/genai\";\r\nimport { createBlob, decodeAudioData } from '../utils/audioHelpers';\r\nimport { VOICE_CONFIG } from '../constants/chat';\r\n\r\nexport const useVoiceSession = () => {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [status, setStatus] = useState<'connecting' | 'listening' | 'speaking' | 'error'>('connecting');\r\n  const [audioLevel, setAudioLevel] = useState(0);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n\r\n  const refs = useRef({\r\n    audioCtx: null as AudioContext | null,\r\n    inputCtx: null as AudioContext | null,\r\n    stream: null as MediaStream | null,\r\n    processor: null as ScriptProcessorNode | null,\r\n    session: null as Promise<any> | null,\r\n    nextTime: 0,\r\n    sources: new Set<AudioBufferSourceNode>(),\r\n  });\r\n\r\n  const startSession = async () => {\r\n    try {\r\n      setIsActive(true);\r\n      setStatus('connecting');\r\n      setAudioLevel(0);\r\n      setIsMuted(false);\r\n      refs.current.nextTime = 0;\r\n\r\n      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n      const AC = window.AudioContext || (window as any).webkitAudioContext;\r\n      refs.current.inputCtx = new AC({ sampleRate: 16000 });\r\n      refs.current.audioCtx = new AC({ sampleRate: 24000 });\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      refs.current.stream = stream;\r\n\r\n      const sessionPromise = ai.live.connect({\r\n        model: VOICE_CONFIG.model,\r\n        config: {\r\n          responseModalities: [Modality.AUDIO],\r\n          speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: VOICE_CONFIG.voiceName } } },\r\n          systemInstruction: \"You are a helpful, concise AI assistant.\",\r\n        },\r\n        callbacks: {\r\n          onopen: () => {\r\n            setStatus('listening');\r\n            setupAudioProcessing(stream, sessionPromise);\r\n          },\r\n          onmessage: (msg: LiveServerMessage) => handleMessage(msg),\r\n          onclose: () => setStatus('connecting'),\r\n          onerror: (e) => { console.error(e); setStatus('error'); }\r\n        }\r\n      });\r\n      refs.current.session = sessionPromise;\r\n    } catch (e) {\r\n      console.error(e);\r\n      setStatus('error');\r\n    }\r\n  };\r\n\r\n  const setupAudioProcessing = (stream: MediaStream, sessionPromise: Promise<any>) => {\r\n    const ctx = refs.current.inputCtx!;\r\n    const source = ctx.createMediaStreamSource(stream);\r\n    const processor = ctx.createScriptProcessor(4096, 1, 1);\r\n    refs.current.processor = processor;\r\n\r\n    processor.onaudioprocess = (e) => {\r\n      const input = e.inputBuffer.getChannelData(0);\r\n      const rms = Math.sqrt(input.reduce((s, v) => s + v * v, 0) / input.length);\r\n      setAudioLevel(prev => prev * 0.8 + rms * 0.4); // Smoothed level\r\n\r\n      if (!isMuted) {\r\n        const blob = createBlob(input);\r\n        sessionPromise.then(s => s.sendRealtimeInput({ media: blob }));\r\n      }\r\n    };\r\n    source.connect(processor);\r\n    processor.connect(ctx.destination);\r\n  };\r\n\r\n  const handleMessage = async (msg: LiveServerMessage) => {\r\n    const data = msg.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;\r\n    if (data && refs.current.audioCtx) {\r\n      setStatus('speaking');\r\n      const buffer = await decodeAudioData(data, refs.current.audioCtx);\r\n      const ctx = refs.current.audioCtx;\r\n      if (refs.current.nextTime < ctx.currentTime) refs.current.nextTime = ctx.currentTime;\r\n      \r\n      const source = ctx.createBufferSource();\r\n      source.buffer = buffer;\r\n      source.connect(ctx.destination);\r\n      source.start(refs.current.nextTime);\r\n      refs.current.nextTime += buffer.duration;\r\n      refs.current.sources.add(source);\r\n      source.onended = () => {\r\n        refs.current.sources.delete(source);\r\n        if (refs.current.sources.size === 0) setStatus('listening');\r\n      };\r\n    }\r\n    if (msg.serverContent?.interrupted) {\r\n      refs.current.sources.forEach(s => s.stop());\r\n      refs.current.sources.clear();\r\n      refs.current.nextTime = 0;\r\n      setStatus('listening');\r\n    }\r\n  };\r\n\r\n  const stopSession = () => {\r\n    setIsActive(false);\r\n    setStatus('connecting');\r\n    refs.current.stream?.getTracks().forEach(t => t.stop());\r\n    refs.current.processor?.disconnect();\r\n    refs.current.inputCtx?.close();\r\n    refs.current.audioCtx?.close();\r\n    refs.current.sources.forEach(s => s.stop());\r\n    refs.current.session?.then((s: any) => s.close?.());\r\n  };\r\n\r\n  return { isActive, status, audioLevel, isMuted, startSession, stopSession, toggleMic: () => setIsMuted(!isMuted) };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 628, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/EmptyState.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Terminal, BarChart3, FileText, Sparkles } from 'lucide-react';\r\nimport { AuxLogo } from '../sidebar/AuxLogo';\r\n\r\ninterface EmptyStateProps {\r\n  onSuggestionClick: (prompt: string, modelId: string) => void;\r\n}\r\n\r\nexport const EmptyState: React.FC<EmptyStateProps> = ({ onSuggestionClick }) => {\r\n  const suggestions = [\r\n    { icon: Terminal, label: 'Code Assistant', text: 'Debug, refactor, and optimize.', prompt: \"Analyze this codebase and suggest performance improvements. Focus on memory leaks and time complexity.\", color: \"bg-blue-50\", model: \"gemini-3-pro-preview\" },\r\n    { icon: BarChart3, label: 'Data Visualization', text: 'Create charts and insights.', prompt: \"Generate a React component for a sales dashboard chart using Recharts.\", color: \"bg-purple-50\", model: \"gemini-3-pro-preview\" },\r\n    { icon: FileText, label: 'Content Writer', text: 'Blogs, emails, and docs.', prompt: \"Write a technical blog post about the future of Generative AI in enterprise software.\", color: \"bg-orange-50\", model: \"gemini-3-pro-preview\" },\r\n    { icon: Sparkles, label: 'Brainstorming', text: 'Generate ideas and strategies.', prompt: \"Brainstorm 5 creative names for a new fitness app focused on calisthenics.\", color: \"bg-green-50\", model: \"gemini-3-pro-preview\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex-1 flex flex-col items-center justify-center w-full max-w-3xl animate-in fade-in zoom-in-95 duration-300\">\r\n      <div className=\"mb-8\"><div className=\"w-16 h-16 text-black dark:text-white flex items-center justify-center\"><AuxLogo className=\"w-full h-full\" /></div></div>\r\n      <p className=\"text-gray-500 dark:text-gray-400 mb-12 text-center max-w-md text-lg\">Supercharge your workflow. What would you like to achieve today?</p>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 w-full px-4\">\r\n        {suggestions.map((s, i) => (\r\n          <button key={i} onClick={() => onSuggestionClick(s.prompt, s.model)} className=\"group relative p-6 h-40 rounded-3xl bg-white dark:bg-[#1f1f1f] border border-gray-100 dark:border-[#333] hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-300 shadow-sm hover:shadow-md text-left flex flex-col justify-between overflow-hidden\">\r\n            <div className={`absolute right-0 top-0 p-24 ${s.color} dark:bg-opacity-10 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 translate-x-10 -translate-y-10`} />\r\n            <div className=\"w-10 h-10 rounded-full bg-gray-50 dark:bg-[#2a2a2a] flex items-center justify-center text-gray-900 dark:text-white mb-4 z-10\"><s.icon size={20} strokeWidth={1.5} /></div>\r\n            <div className=\"z-10\"><h3 className=\"font-medium text-gray-900 dark:text-white mb-1\">{s.label}</h3><p className=\"text-sm text-gray-500 dark:text-gray-400\">{s.text}</p></div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AACA;;;;AAMO,MAAM,aAAwC,CAAC,EAAE,iBAAiB,EAAE;IACzE,MAAM,cAAc;QAClB;YAAE,MAAM,6MAAA,CAAA,WAAQ;YAAE,OAAO;YAAkB,MAAM;YAAkC,QAAQ;YAA0G,OAAO;YAAc,OAAO;QAAuB;QACxP;YAAE,MAAM,qNAAA,CAAA,YAAS;YAAE,OAAO;YAAsB,MAAM;YAA+B,QAAQ;YAA0E,OAAO;YAAgB,OAAO;QAAuB;QAC5N;YAAE,MAAM,iNAAA,CAAA,WAAQ;YAAE,OAAO;YAAkB,MAAM;YAA4B,QAAQ;YAAyF,OAAO;YAAgB,OAAO;QAAuB;QACnO;YAAE,MAAM,6MAAA,CAAA,WAAQ;YAAE,OAAO;YAAiB,MAAM;YAAkC,QAAQ;YAA8E,OAAO;YAAe,OAAO;QAAuB;KAC7N;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BAAO,cAAA,6LAAC;oBAAI,WAAU;8BAAwE,cAAA,6LAAC,oIAAA,CAAA,UAAO;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAChI,6LAAC;gBAAE,WAAU;0BAAsE;;;;;;0BACnF,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,GAAG,kBACnB,6LAAC;wBAAe,SAAS,IAAM,kBAAkB,EAAE,MAAM,EAAE,EAAE,KAAK;wBAAG,WAAU;;0CAC7E,6LAAC;gCAAI,WAAW,CAAC,4BAA4B,EAAE,EAAE,KAAK,CAAC,0IAA0I,CAAC;;;;;;0CAClM,6LAAC;gCAAI,WAAU;0CAA+H,cAAA,6LAAC,EAAE,IAAI;oCAAC,MAAM;oCAAI,aAAa;;;;;;;;;;;0CAC7K,6LAAC;gCAAI,WAAU;;kDAAO,6LAAC;wCAAG,WAAU;kDAAkD,EAAE,KAAK;;;;;;kDAAM,6LAAC;wCAAE,WAAU;kDAA4C,EAAE,IAAI;;;;;;;;;;;;;uBAHvJ;;;;;;;;;;;;;;;;AASvB;KAvBa","debugId":null}},
    {"offset": {"line": 790, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/utils/formatHelpers.ts"],"sourcesContent":["\r\nexport const formatTime = (date: Date) => {\r\n  return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n};\r\n"],"names":[],"mappings":";;;AACO,MAAM,aAAa,CAAC;IACzB,OAAO,KAAK,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;AAC1E","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/utils/fileHelpers.ts"],"sourcesContent":["\r\nexport const fileToDataUrl = (file: File): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(reader.result as string);\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(file);\r\n  });\r\n};\r\n\r\nexport const formatFileSize = (bytes: number) => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n"],"names":[],"mappings":";;;;AACO,MAAM,gBAAgB,CAAC;IAC5B,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG,IAAM,QAAQ,OAAO,MAAM;QAC3C,OAAO,OAAO,GAAG;QACjB,OAAO,aAAa,CAAC;IACvB;AACF;AAEO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,UAAU,GAAG,OAAO;IACxB,MAAM,IAAI;IACV,MAAM,QAAQ;QAAC;QAAS;QAAM;QAAM;KAAK;IACzC,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;IAChD,OAAO,WAAW,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,MAAM,MAAM,KAAK,CAAC,EAAE;AACzE","debugId":null}},
    {"offset": {"line": 841, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/CodeBlock.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport { Check, Copy } from 'lucide-react';\r\n\r\ninterface CodeBlockProps {\r\n  language: string;\r\n  code: string;\r\n}\r\n\r\nexport const CodeBlock: React.FC<CodeBlockProps> = ({ language, code }) => {\r\n  const codeRef = useRef<HTMLElement>(null);\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if ((window as any).Prism && codeRef.current) (window as any).Prism.highlightElement(codeRef.current);\r\n  }, [code, language]);\r\n\r\n  const handleCopy = () => {\r\n    navigator.clipboard.writeText(code);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative group rounded-xl overflow-hidden my-6 border border-gray-200 dark:border-[#333] shadow-sm\">\r\n      <div className=\"flex items-center justify-between px-4 py-2.5 bg-gray-50 dark:bg-[#262626] border-b border-gray-200 dark:border-[#333]\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"flex gap-1.5\">\r\n            {[1, 2, 3].map(i => <div key={i} className=\"w-2.5 h-2.5 rounded-full bg-gray-300 dark:bg-gray-600\" />)}\r\n          </div>\r\n          <span className=\"ml-2 text-xs font-mono text-gray-500 dark:text-gray-400 lowercase\">{language || 'text'}</span>\r\n        </div>\r\n        <button onClick={handleCopy} className=\"flex items-center gap-1.5 text-xs font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white\">\r\n          {copied ? <Check size={14} /> : <Copy size={14} />}\r\n          <span>{copied ? 'Copied' : 'Copy'}</span>\r\n        </button>\r\n      </div>\r\n      <div className=\"bg-white dark:bg-[#1e1e1e] overflow-x-auto p-0 custom-scrollbar\">\r\n        <pre className=\"!m-0 !p-4 !bg-transparent text-sm leading-relaxed\">\r\n          <code ref={codeRef} className={`language-${language || 'javascript'}`}>{code}</code>\r\n        </pre>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;;;AAOO,MAAM,YAAsC,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;;IACpE,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAe;IACpC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,IAAI,AAAC,OAAe,KAAK,IAAI,QAAQ,OAAO,EAAE,AAAC,OAAe,KAAK,CAAC,gBAAgB,CAAC,QAAQ,OAAO;QACtG;8BAAG;QAAC;QAAM;KAAS;IAEnB,MAAM,aAAa;QACjB,UAAU,SAAS,CAAC,SAAS,CAAC;QAC9B,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;IACrC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ;oCAAC;oCAAG;oCAAG;iCAAE,CAAC,GAAG,CAAC,CAAA,kBAAK,6LAAC;wCAAY,WAAU;uCAAb;;;;;;;;;;0CAEhC,6LAAC;gCAAK,WAAU;0CAAqE,YAAY;;;;;;;;;;;;kCAEnG,6LAAC;wBAAO,SAAS;wBAAY,WAAU;;4BACpC,uBAAS,6LAAC,uMAAA,CAAA,QAAK;gCAAC,MAAM;;;;;qDAAS,6LAAC,qMAAA,CAAA,OAAI;gCAAC,MAAM;;;;;;0CAC5C,6LAAC;0CAAM,SAAS,WAAW;;;;;;;;;;;;;;;;;;0BAG/B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAK,KAAK;wBAAS,WAAW,CAAC,SAAS,EAAE,YAAY,cAAc;kCAAG;;;;;;;;;;;;;;;;;;;;;;AAKlF;GAnCa;KAAA","debugId":null}},
    {"offset": {"line": 989, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/MediaRenderer.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\ninterface MediaRendererProps {\r\n  url: string;\r\n  type: 'video' | 'image';\r\n}\r\n\r\nexport const MediaRenderer: React.FC<MediaRendererProps> = ({ url, type }) => {\r\n  if (type === 'video') {\r\n    const match = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/i);\r\n    if (!match?.[1]) return null;\r\n\r\n    return (\r\n      <div className=\"my-4 rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-800 w-full max-w-2xl bg-black\">\r\n        <iframe\r\n          className=\"w-full aspect-video\"\r\n          src={`https://www.youtube.com/embed/${match[1]}`}\r\n          title=\"YouTube video player\"\r\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n          allowFullScreen\r\n          frameBorder=\"0\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"my-4 rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-800 w-full max-w-md bg-gray-50 dark:bg-[#1a1a1a]\">\r\n      <img \r\n        src={url} \r\n        alt=\"Embedded content\" \r\n        className=\"w-full h-auto object-cover transition-opacity duration-500 ease-out\"\r\n        loading=\"lazy\"\r\n        onError={(e) => { (e.target as HTMLImageElement).style.display = 'none'; }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAQO,MAAM,gBAA8C,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE;IACvE,IAAI,SAAS,SAAS;QACpB,MAAM,QAAQ,IAAI,KAAK,CAAC;QACxB,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO;QAExB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBACC,WAAU;gBACV,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC,EAAE,EAAE;gBAChD,OAAM;gBACN,OAAM;gBACN,eAAe;gBACf,aAAY;;;;;;;;;;;IAIpB;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,KAAI;YACJ,WAAU;YACV,SAAQ;YACR,SAAS,CAAC;gBAAS,EAAE,MAAM,CAAsB,KAAK,CAAC,OAAO,GAAG;YAAQ;;;;;;;;;;;AAIjF;KA9Ba","debugId":null}},
    {"offset": {"line": 1051, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/EmbeddedTable.tsx"],"sourcesContent":["\r\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { TableData } from '../../types/chat';\r\nimport { Maximize2, BarChart3, Database } from 'lucide-react';\r\n\r\ninterface EmbeddedTableProps {\r\n  data: TableData;\r\n  fileName: string;\r\n  visualHint?: string;\r\n  source?: string;\r\n  onExpand: () => void;\r\n}\r\n\r\nexport const EmbeddedTable: React.FC<EmbeddedTableProps> = ({ data, fileName, visualHint, source, onExpand }) => {\r\n  // Local state for editing and resizing\r\n  const [rows, setRows] = useState<any[]>([]);\r\n  const [headers, setHeaders] = useState<string[]>([]);\r\n  const [colWidths, setColWidths] = useState<Record<string, number>>({});\r\n  \r\n  // Interaction State\r\n  const [selectedCell, setSelectedCell] = useState<{r: number, c: string} | null>(null);\r\n  \r\n  // Resizing State\r\n  const resizingRef = useRef<{ startX: number, startWidth: number, header: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Sync with props (e.g. if updated from drawer)\r\n    setRows(data.rows.slice(0, 5)); // Only show first 5 rows in embedded view\r\n    setHeaders(data.headers);\r\n    \r\n    // Initialize widths\r\n    const initialWidths: Record<string, number> = {};\r\n    data.headers.forEach(h => initialWidths[h] = 120);\r\n    setColWidths(initialWidths);\r\n  }, [data]);\r\n\r\n  // --- Resizing Logic ---\r\n  const handleMouseDown = (e: React.MouseEvent, header: string) => {\r\n    e.preventDefault();\r\n    resizingRef.current = {\r\n      startX: e.clientX,\r\n      startWidth: colWidths[header] || 120,\r\n      header\r\n    };\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n  };\r\n\r\n  const handleMouseMove = useCallback((e: MouseEvent) => {\r\n    if (!resizingRef.current) return;\r\n    const { startX, startWidth, header } = resizingRef.current;\r\n    const diff = e.clientX - startX;\r\n    setColWidths(prev => ({\r\n      ...prev,\r\n      [header]: Math.max(50, startWidth + diff)\r\n    }));\r\n  }, []);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    resizingRef.current = null;\r\n    document.removeEventListener('mousemove', handleMouseMove);\r\n    document.removeEventListener('mouseup', handleMouseUp);\r\n  }, [handleMouseMove]);\r\n\r\n  // --- Interaction Logic ---\r\n  const handleCellClick = (r: number, c: string) => {\r\n    setSelectedCell({ r, c });\r\n  };\r\n\r\n  // Helper to get column letter (A, B, C...)\r\n  const getColLetter = (index: number) => String.fromCharCode(65 + index);\r\n\r\n  return (\r\n    <div className=\"w-full border border-gray-300 dark:border-[#444] bg-white dark:bg-[#1e1e1e] shadow-sm select-none flex flex-col rounded-xl overflow-hidden font-sans transition-all hover:shadow-md group\">\r\n      {/* Top Bar */}\r\n      <div className=\"flex items-center justify-between px-3 py-2 bg-[#f8f9fa] dark:bg-[#252525] border-b border-gray-300 dark:border-[#444]\">\r\n        <div className=\"flex items-center gap-3 min-w-0\">\r\n          <div className={`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${visualHint ? 'bg-purple-600' : 'bg-[#107c41]'}`}>\r\n             {visualHint ? <BarChart3 size={16} className=\"text-white\" /> : <Database size={16} className=\"text-white\" />}\r\n          </div>\r\n          <div className=\"flex flex-col min-w-0\">\r\n             <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-xs font-semibold text-gray-900 dark:text-gray-100 truncate\">{fileName}</span>\r\n                {source && (\r\n                    <span className=\"px-1.5 py-0.5 rounded-md bg-gray-200 dark:bg-[#333] text-[9px] font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wide border border-gray-300 dark:border-[#444]\">\r\n                        {source}\r\n                    </span>\r\n                )}\r\n             </div>\r\n             {visualHint && <span className=\"text-[9px] text-purple-600 dark:text-purple-400 uppercase font-bold tracking-wide\">Analysis Ready</span>}\r\n          </div>\r\n        </div>\r\n        <button \r\n            onClick={onExpand}\r\n            className=\"flex-shrink-0 flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-white dark:bg-[#333] text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-[#444] hover:bg-gray-50 dark:hover:bg-[#404040] rounded-full transition-colors shadow-sm\"\r\n        >\r\n            <Maximize2 size={12} strokeWidth={2} />\r\n            <span className=\"hidden sm:inline\">Expand</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Excel Grid */}\r\n      <div className=\"overflow-x-auto relative no-scrollbar bg-white dark:bg-[#1e1e1e]\">\r\n        <div className=\"inline-block min-w-full\">\r\n            {/* Headers */}\r\n            <div className=\"flex\">\r\n                {/* Row Number Header */}\r\n                <div className=\"w-10 flex-shrink-0 bg-[#f3f2f1] dark:bg-[#2b2b2b] border-r border-b border-gray-300 dark:border-[#444] h-8\"></div>\r\n                {headers.map((h, i) => (\r\n                    <div \r\n                        key={h} \r\n                        className=\"relative flex-shrink-0 flex items-center justify-center bg-[#f3f2f1] dark:bg-[#2b2b2b] border-r border-b border-gray-300 dark:border-[#444] h-8 text-[11px] font-bold text-gray-600 dark:text-gray-300\"\r\n                        style={{ width: colWidths[h] }}\r\n                    >\r\n                        {h} ({getColLetter(i)})\r\n                        {/* Resizer Handle */}\r\n                        <div \r\n                            className=\"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-[#107c41] z-10\"\r\n                            onMouseDown={(e) => handleMouseDown(e, h)}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Rows */}\r\n            {rows.map((row, rIdx) => (\r\n                <div key={rIdx} className=\"flex group\">\r\n                    {/* Row Number */}\r\n                    <div className=\"w-10 flex-shrink-0 flex items-center justify-center bg-[#f3f2f1] dark:bg-[#2b2b2b] border-r border-b border-gray-300 dark:border-[#444] text-[10px] text-gray-500 dark:text-gray-400 font-mono select-none group-hover:bg-[#e1dfdd] dark:group-hover:bg-[#333]\">\r\n                        {rIdx + 1}\r\n                    </div>\r\n                    \r\n                    {/* Cells */}\r\n                    {headers.map((h) => {\r\n                        const isSelected = selectedCell?.r === rIdx && selectedCell?.c === h;\r\n\r\n                        return (\r\n                            <div \r\n                                key={h}\r\n                                className={`\r\n                                    relative flex-shrink-0 h-7 text-xs border-r border-b border-gray-200 dark:border-[#444] px-2 flex items-center\r\n                                    ${rIdx % 2 === 0 ? 'bg-white dark:bg-[#1e1e1e]' : 'bg-[#fafafa] dark:bg-[#232323]'} \r\n                                    ${isSelected ? 'outline outline-2 outline-[#107c41] z-10' : ''}\r\n                                `}\r\n                                style={{ width: colWidths[h] }}\r\n                                onClick={() => handleCellClick(rIdx, h)}\r\n                            >\r\n                                <span className=\"truncate w-full text-gray-800 dark:text-gray-200 pointer-events-none\">\r\n                                    {row[h]}\r\n                                </span>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"px-3 py-2 bg-[#f8f9fa] dark:bg-[#252525] border-t border-gray-300 dark:border-[#444] flex justify-between items-center\">\r\n        <span className=\"text-[10px] font-medium text-gray-500 dark:text-gray-400\">\r\n           {rows.length < data.rows.length ? `Previewing ${rows.length} of ${data.rows.length} rows` : `${rows.length} rows`}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1375, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/table/types.ts"],"sourcesContent":["\r\nexport interface NotebookBlock {\r\n  type: 'text' | 'chart' | 'stat';\r\n  content?: string; // For text\r\n  title?: string;\r\n  // For charts\r\n  chartType?: 'bar' | 'line' | 'pie' | 'area';\r\n  xAxis?: string;\r\n  yAxis?: string;\r\n  aggregation?: 'sum' | 'count' | 'average';\r\n  explanation?: string;\r\n  // For stats\r\n  statValue?: string;\r\n  statLabel?: string;\r\n  trend?: 'up' | 'down' | 'neutral';\r\n}\r\n\r\nexport interface NotebookReport {\r\n  title: string;\r\n  summary: string;\r\n  blocks: NotebookBlock[];\r\n}\r\n\r\nexport const COLOR_THEMES: Record<string, string[]> = {\r\n  green: ['#107c41', '#21a366', '#33c481', '#185c37', '#0b5a2d'],\r\n  blue: ['#007AFF', '#5856D6', '#00C7BE', '#32ADE6', '#007AFF'],\r\n  purple: ['#AF52DE', '#BF5AF2', '#DA8FFF', '#5E5CE6', '#7D54DE'],\r\n  orange: ['#FF9500', '#FF3B30', '#FF2D55', '#FFCC00', '#FF9500'],\r\n  gray: ['#8E8E93', '#AEAEB2', '#C7C7CC', '#48484A', '#1C1C1E'],\r\n};\r\n"],"names":[],"mappings":";;;AAuBO,MAAM,eAAyC;IACpD,OAAO;QAAC;QAAW;QAAW;QAAW;QAAW;KAAU;IAC9D,MAAM;QAAC;QAAW;QAAW;QAAW;QAAW;KAAU;IAC7D,QAAQ;QAAC;QAAW;QAAW;QAAW;QAAW;KAAU;IAC/D,QAAQ;QAAC;QAAW;QAAW;QAAW;QAAW;KAAU;IAC/D,MAAM;QAAC;QAAW;QAAW;QAAW;QAAW;KAAU;AAC/D","debugId":null}},
    {"offset": {"line": 1424, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/ChatChart.tsx"],"sourcesContent":["\r\nimport React, { useMemo } from 'react';\r\nimport {\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\r\n  PieChart, Pie, Cell, LineChart, Line, Legend\r\n} from 'recharts';\r\nimport { Maximize2, BarChart3 } from 'lucide-react';\r\nimport { TableData } from '../../types/chat';\r\nimport { COLOR_THEMES } from '../table/types';\r\n\r\ninterface ChatChartProps {\r\n  data: TableData;\r\n  type: 'bar' | 'line' | 'pie' | 'area' | string;\r\n  onExpand?: () => void;\r\n}\r\n\r\nexport const ChatChart: React.FC<ChatChartProps> = ({ data, type, onExpand }) => {\r\n  const { headers, rows } = data;\r\n\r\n  const chartInfo = useMemo(() => {\r\n    if (!rows || rows.length === 0) return null;\r\n    \r\n    const firstRow = rows[0];\r\n    const labelKey = headers.find(h => typeof firstRow[h] === 'string') || headers[0];\r\n    const valueKeys = headers.filter(h => typeof firstRow[h] === 'number' && h !== labelKey);\r\n    const finalValueKeys = valueKeys.length > 0 ? valueKeys : headers.filter(h => h !== labelKey).slice(0, 1);\r\n    \r\n    return { labelKey, valueKeys: finalValueKeys };\r\n  }, [headers, rows]);\r\n\r\n  if (!chartInfo || rows.length === 0) return null;\r\n\r\n  const colors = COLOR_THEMES['blue'];\r\n  const monoFont = { fontFamily: 'JetBrains Mono, monospace', fontSize: 10, fontWeight: 500 };\r\n\r\n  return (\r\n    <div className=\"w-full my-6 bg-white dark:bg-[#1e1e1e] rounded-3xl border border-gray-200 dark:border-[#333] overflow-hidden shadow-sm hover:shadow-md transition-all duration-300\">\r\n      {/* Chart Header - Standardized to match CodeBlock */}\r\n      <div className=\"px-4 py-2.5 bg-gray-50 dark:bg-[#262626] border-b border-gray-200 dark:border-[#333] flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n              <div className=\"flex gap-1.5 mr-2\">\r\n                  {[1, 2, 3].map(i => <div key={i} className=\"w-2.5 h-2.5 rounded-full bg-gray-300 dark:bg-gray-600\" />)}\r\n              </div>\r\n              <span className=\"text-xs font-mono text-gray-500 dark:text-gray-400 lowercase\">visual_insight</span>\r\n          </div>\r\n          <button \r\n            onClick={onExpand}\r\n            className=\"flex items-center gap-1.5 text-xs font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors\"\r\n          >\r\n            <Maximize2 size={14} />\r\n            <span>Expand</span>\r\n          </button>\r\n      </div>\r\n\r\n      {/* Chart Canvas */}\r\n      <div className=\"w-full h-72 p-6\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          {type === 'pie' ? (\r\n            <PieChart>\r\n              <Pie\r\n                data={rows}\r\n                dataKey={chartInfo.valueKeys[0]}\r\n                nameKey={chartInfo.labelKey}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                outerRadius={80}\r\n                innerRadius={50}\r\n                paddingAngle={4}\r\n                stroke=\"none\"\r\n              >\r\n                {rows.map((_, index) => (\r\n                  <Cell key={`cell-${index}`} fill={colors[index % colors.length]} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip \r\n                  contentStyle={{ borderRadius: '16px', border: 'none', boxShadow: '0 10px 25px rgba(0,0,0,0.1)', fontSize: '11px', fontFamily: 'JetBrains Mono' }}\r\n              />\r\n              <Legend verticalAlign=\"bottom\" height={36} iconType=\"circle\" wrapperStyle={{ fontSize: '10px', fontFamily: 'JetBrains Mono', textTransform: 'uppercase' }} />\r\n            </PieChart>\r\n          ) : type === 'line' ? (\r\n            <LineChart data={rows} margin={{ top: 10, right: 10, left: -10, bottom: 0 }}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"rgba(0,0,0,0.05)\" />\r\n              <XAxis \r\n                dataKey={chartInfo.labelKey} \r\n                axisLine={false} \r\n                tickLine={false} \r\n                tick={{ ...monoFont, fill: '#999' }} \r\n                dy={10}\r\n              />\r\n              <YAxis \r\n                axisLine={false} \r\n                tickLine={false} \r\n                tick={{ ...monoFont, fill: '#999' }} \r\n              />\r\n              <Tooltip \r\n                contentStyle={{ borderRadius: '16px', border: 'none', boxShadow: '0 10px 25px rgba(0,0,0,0.1)', fontFamily: 'JetBrains Mono', fontSize: '11px' }}\r\n              />\r\n              {chartInfo.valueKeys.map((key, i) => (\r\n                <Line \r\n                  key={key} \r\n                  type=\"monotone\" \r\n                  dataKey={key} \r\n                  stroke={colors[i % colors.length]} \r\n                  strokeWidth={3} \r\n                  dot={{ r: 5, strokeWidth: 2, fill: '#fff' }} \r\n                  activeDot={{ r: 7, strokeWidth: 0 }}\r\n                />\r\n              ))}\r\n            </LineChart>\r\n          ) : (\r\n            <BarChart data={rows} margin={{ top: 10, right: 10, left: -10, bottom: 0 }}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"rgba(0,0,0,0.05)\" />\r\n              <XAxis \r\n                dataKey={chartInfo.labelKey} \r\n                axisLine={false} \r\n                tickLine={false} \r\n                tick={{ ...monoFont, fill: '#999' }} \r\n                dy={10}\r\n              />\r\n              <YAxis \r\n                axisLine={false} \r\n                tickLine={false} \r\n                tick={{ ...monoFont, fill: '#999' }} \r\n              />\r\n              <Tooltip \r\n                cursor={{ fill: 'rgba(0,0,0,0.02)' }}\r\n                contentStyle={{ borderRadius: '16px', border: 'none', boxShadow: '0 10px 25px rgba(0,0,0,0.1)', fontFamily: 'JetBrains Mono', fontSize: '11px' }}\r\n              />\r\n              {chartInfo.valueKeys.map((key, i) => (\r\n                <Bar \r\n                  key={key} \r\n                  dataKey={key} \r\n                  fill={colors[i % colors.length]} \r\n                  radius={[6, 6, 0, 0]} \r\n                  barSize={32}\r\n                />\r\n              ))}\r\n            </BarChart>\r\n          )}\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1806, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/AnalysisBlock.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { AlertCircle, TrendingUp } from 'lucide-react';\r\nimport { CodeBlock } from './CodeBlock';\r\nimport { EmbeddedTable } from './EmbeddedTable';\r\nimport { ChatChart } from './ChatChart';\r\nimport { TableData } from '../../types/chat';\r\n\r\ninterface AnalysisBlockProps {\r\n  code: string;\r\n  result?: {\r\n    type: 'table' | 'text' | 'error';\r\n    data: TableData | string;\r\n    visualHint?: string;\r\n  };\r\n  onExpandTable?: (data: TableData, title: string, visualHint?: string) => void;\r\n}\r\n\r\n// Mini-component for Single Value Results\r\nconst StatResult = ({ label, value }: { label: string, value: any }) => (\r\n  <div className=\"bg-white dark:bg-[#1e1e1e] p-5 rounded-2xl border border-gray-200 dark:border-[#333] shadow-sm inline-flex flex-col min-w-[160px] animate-in fade-in duration-300\">\r\n    <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1\">{label}</span>\r\n    <div className=\"flex items-center gap-2\">\r\n       <span className=\"text-2xl font-bold text-gray-900 dark:text-white font-mono\">{value}</span>\r\n       {typeof value === 'number' && (\r\n         <div className=\"p-1 rounded-full bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400\">\r\n            <TrendingUp size={12} />\r\n         </div>\r\n       )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport const AnalysisBlock: React.FC<AnalysisBlockProps> = ({ code, result, onExpandTable }) => {\r\n  return (\r\n    <div className=\"my-6 animate-in fade-in duration-300\">\r\n      {/* 1. The Code Artifact */}\r\n      <CodeBlock language=\"sql\" code={code} />\r\n\r\n      {/* 2. The Result Artifacts */}\r\n      {result && (\r\n        <div className=\"mt-4 flex flex-col gap-4 items-start\">\r\n           {result.type === 'error' && (\r\n             <div className=\"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-xs rounded-xl border border-red-100 dark:border-red-800 flex gap-2 items-start font-mono shadow-sm w-full\">\r\n                 <AlertCircle size={14} className=\"mt-0.5 flex-shrink-0\" />\r\n                 {result.data as string}\r\n             </div>\r\n           )}\r\n\r\n           {result.type === 'text' && (\r\n             <div className=\"rounded-xl border border-gray-200 dark:border-[#333] overflow-hidden bg-white dark:bg-[#1e1e1e] shadow-sm w-full\">\r\n                <div className=\"px-4 py-2 border-b border-gray-200 dark:border-[#333] bg-gray-50 dark:bg-[#252525]\">\r\n                   <span className=\"text-[10px] font-bold uppercase text-gray-500 tracking-wider\">Output</span>\r\n                </div>\r\n                <pre className=\"font-mono text-xs text-gray-800 dark:text-gray-300 whitespace-pre-wrap p-4\">\r\n                   {result.data as string}\r\n                </pre>\r\n             </div>\r\n           )}\r\n           \r\n           {result.type === 'table' && (\r\n             <>\r\n               {/* A. Chart Visualization (If applicable) */}\r\n               {result.visualHint ? (\r\n                 <ChatChart \r\n                   data={result.data as TableData} \r\n                   type={result.visualHint} \r\n                   onExpand={() => onExpandTable && onExpandTable(result.data as TableData, \"Analysis Result\", result.visualHint)}\r\n                 />\r\n               ) : (\r\n                 /* B. Scalar / Stat Check */\r\n                 (() => {\r\n                    const tableData = result.data as TableData;\r\n                    const isScalar = tableData.rows.length === 1 && tableData.headers.length === 1;\r\n                    \r\n                    if (isScalar) {\r\n                        const header = tableData.headers[0];\r\n                        const val = tableData.rows[0][header];\r\n                        return <StatResult label={header} value={val} />;\r\n                    }\r\n                    \r\n                    // C. Standard Table (Only if not scalar and no chart)\r\n                    return (\r\n                        <EmbeddedTable \r\n                            data={tableData} \r\n                            fileName=\"Analysis Result\" \r\n                            visualHint={result.visualHint}\r\n                            onExpand={() => onExpandTable && onExpandTable(tableData, \"Analysis Result\", result.visualHint)} \r\n                        />\r\n                    );\r\n                 })()\r\n               )}\r\n             </>\r\n           )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AACA;;;;;;AAaA,0CAA0C;AAC1C,MAAM,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,EAAiC,iBACjE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAK,WAAU;0BAAsE;;;;;;0BACtF,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC;wBAAK,WAAU;kCAA8D;;;;;;oBAC7E,OAAO,UAAU,0BAChB,6LAAC;wBAAI,WAAU;kCACZ,cAAA,6LAAC,qNAAA,CAAA,aAAU;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;KAPxB;AAcC,MAAM,gBAA8C,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,aAAa,EAAE;IACzF,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,mIAAA,CAAA,YAAS;gBAAC,UAAS;gBAAM,MAAM;;;;;;YAG/B,wBACC,6LAAC;gBAAI,WAAU;;oBACX,OAAO,IAAI,KAAK,yBACf,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,uNAAA,CAAA,cAAW;gCAAC,MAAM;gCAAI,WAAU;;;;;;4BAChC,OAAO,IAAI;;;;;;;oBAIjB,OAAO,IAAI,KAAK,wBACf,6LAAC;wBAAI,WAAU;;0CACZ,6LAAC;gCAAI,WAAU;0CACZ,cAAA,6LAAC;oCAAK,WAAU;8CAA+D;;;;;;;;;;;0CAElF,6LAAC;gCAAI,WAAU;0CACX,OAAO,IAAI;;;;;;;;;;;;oBAKnB,OAAO,IAAI,KAAK,yBACf;kCAEG,OAAO,UAAU,iBAChB,6LAAC,mIAAA,CAAA,YAAS;4BACR,MAAM,OAAO,IAAI;4BACjB,MAAM,OAAO,UAAU;4BACvB,UAAU,IAAM,iBAAiB,cAAc,OAAO,IAAI,EAAe,mBAAmB,OAAO,UAAU;;;;;mCAG/G,0BAA0B,GAC1B,CAAC;4BACE,MAAM,YAAY,OAAO,IAAI;4BAC7B,MAAM,WAAW,UAAU,IAAI,CAAC,MAAM,KAAK,KAAK,UAAU,OAAO,CAAC,MAAM,KAAK;4BAE7E,IAAI,UAAU;gCACV,MAAM,SAAS,UAAU,OAAO,CAAC,EAAE;gCACnC,MAAM,MAAM,UAAU,IAAI,CAAC,EAAE,CAAC,OAAO;gCACrC,qBAAO,6LAAC;oCAAW,OAAO;oCAAQ,OAAO;;;;;;4BAC7C;4BAEA,sDAAsD;4BACtD,qBACI,6LAAC,uIAAA,CAAA,gBAAa;gCACV,MAAM;gCACN,UAAS;gCACT,YAAY,OAAO,UAAU;gCAC7B,UAAU,IAAM,iBAAiB,cAAc,WAAW,mBAAmB,OAAO,UAAU;;;;;;wBAGzG,CAAC;;;;;;;;;;;;;;AAQlB;MAjEa","debugId":null}},
    {"offset": {"line": 1998, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/MarkdownRenderer.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { CodeBlock } from './CodeBlock';\r\nimport { MediaRenderer } from './MediaRenderer';\r\nimport { AnalysisBlock } from './AnalysisBlock';\r\nimport { TableData } from '../../types/chat';\r\n\r\ninterface MarkdownRendererProps {\r\n  content: string;\r\n  executionResult?: {\r\n    type: 'table' | 'text' | 'error';\r\n    data: TableData | string;\r\n  };\r\n  executionResults?: Record<number, {\r\n    type: 'table' | 'text' | 'error';\r\n    data: TableData | string;\r\n    visualHint?: 'bar' | 'line' | 'pie' | 'scatter';\r\n  }>;\r\n  // Updated to include optional visualHint parameter\r\n  onExpandTable?: (data: TableData, title: string, visualHint?: string) => void;\r\n}\r\n\r\nexport const MarkdownRenderer: React.FC<MarkdownRendererProps> = ({ content, executionResult, executionResults, onExpandTable }) => {\r\n  if (!content) return null;\r\n  \r\n  // Split by code blocks. Regex captures the delimiter to include it in the parts array.\r\n  const parts = content.split(/(```[\\s\\S]*?```)/g);\r\n  let codeBlockIndex = 0;\r\n\r\n  return (\r\n    <div className=\"space-y-2 text-[15px] leading-7 text-gray-800 dark:text-gray-200 font-normal\">\r\n      {parts.map((part, index) => {\r\n        if (part.startsWith('```')) {\r\n          const currentCodeIndex = codeBlockIndex++;\r\n          \r\n          // Check if it's a SQL or Python block\r\n          // Robust matching for language identifier (optional) and content\r\n          const match = part.match(/```(\\w*)\\s*([\\s\\S]*?)```/);\r\n          const lang = match?.[1]?.toLowerCase() || '';\r\n          const code = match?.[2] || part.slice(3, -3);\r\n\r\n          // Resolve result: try executionResults (map) first, then fallback to legacy executionResult (single) for first block\r\n          let result = executionResults?.[currentCodeIndex];\r\n          if (!result && currentCodeIndex === 0 && executionResult) {\r\n            result = executionResult as any;\r\n          }\r\n\r\n          if ((lang === 'sql' || lang === 'python') && result) {\r\n             return (\r\n                <AnalysisBlock \r\n                  key={index} \r\n                  code={code} \r\n                  result={result} \r\n                  onExpandTable={onExpandTable}\r\n                />\r\n             );\r\n          }\r\n\r\n          return <CodeBlock key={index} language={lang} code={code} />;\r\n        }\r\n\r\n        // Normal text processing (Markdown, Media, etc.)\r\n        const mediaRegex = /((?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)[a-zA-Z0-9_-]{11}|https?:\\/\\/[^\\s]+?\\.(?:png|jpg|jpeg|gif|webp|svg)(?:\\?[^\\s]*)?)/gi;\r\n        const textParts = part.split(mediaRegex);\r\n\r\n        return (\r\n          <span key={index}>\r\n            {textParts.map((subPart, i) => {\r\n              if (!subPart) return null;\r\n              const isYoutube = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com|youtu\\.be)/i.test(subPart);\r\n              const isImage = /\\.(?:png|jpg|jpeg|gif|webp|svg)(?:\\?.*)?$/i.test(subPart);\r\n\r\n              if (isYoutube) return <MediaRenderer key={i} url={subPart} type=\"video\" />;\r\n              if (isImage) return <MediaRenderer key={i} url={subPart} type=\"image\" />;\r\n\r\n              return subPart.split('\\n').map((line, lineIdx) => {\r\n                if (line === '') return <div key={`${i}-${lineIdx}`} className=\"h-4\" />;\r\n                const segments = line.split(/(\\*\\*.*?\\*\\*)/g);\r\n                return (\r\n                  <p key={`${i}-${lineIdx}`} className=\"mb-2\">\r\n                    {segments.map((seg, k) => seg.startsWith('**') && seg.endsWith('**') ? <strong key={k} className=\"font-semibold text-gray-900 dark:text-white\">{seg.slice(2, -2)}</strong> : seg)}\r\n                  </p>\r\n                );\r\n              });\r\n            })}\r\n          </span>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;;;AAkBO,MAAM,mBAAoD,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,gBAAgB,EAAE,aAAa,EAAE;IAC7H,IAAI,CAAC,SAAS,OAAO;IAErB,uFAAuF;IACvF,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAC5B,IAAI,iBAAiB;IAErB,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,MAAM;YAChB,IAAI,KAAK,UAAU,CAAC,QAAQ;gBAC1B,MAAM,mBAAmB;gBAEzB,sCAAsC;gBACtC,iEAAiE;gBACjE,MAAM,QAAQ,KAAK,KAAK,CAAC;gBACzB,MAAM,OAAO,OAAO,CAAC,EAAE,EAAE,iBAAiB;gBAC1C,MAAM,OAAO,OAAO,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,GAAG,CAAC;gBAE1C,qHAAqH;gBACrH,IAAI,SAAS,kBAAkB,CAAC,iBAAiB;gBACjD,IAAI,CAAC,UAAU,qBAAqB,KAAK,iBAAiB;oBACxD,SAAS;gBACX;gBAEA,IAAI,CAAC,SAAS,SAAS,SAAS,QAAQ,KAAK,QAAQ;oBAClD,qBACG,6LAAC,uIAAA,CAAA,gBAAa;wBAEZ,MAAM;wBACN,QAAQ;wBACR,eAAe;uBAHV;;;;;gBAMb;gBAEA,qBAAO,6LAAC,mIAAA,CAAA,YAAS;oBAAa,UAAU;oBAAM,MAAM;mBAA7B;;;;;YACzB;YAEA,iDAAiD;YACjD,MAAM,aAAa;YACnB,MAAM,YAAY,KAAK,KAAK,CAAC;YAE7B,qBACE,6LAAC;0BACE,UAAU,GAAG,CAAC,CAAC,SAAS;oBACvB,IAAI,CAAC,SAAS,OAAO;oBACrB,MAAM,YAAY,yDAAyD,IAAI,CAAC;oBAChF,MAAM,UAAU,6CAA6C,IAAI,CAAC;oBAElE,IAAI,WAAW,qBAAO,6LAAC,uIAAA,CAAA,gBAAa;wBAAS,KAAK;wBAAS,MAAK;uBAAtB;;;;;oBAC1C,IAAI,SAAS,qBAAO,6LAAC,uIAAA,CAAA,gBAAa;wBAAS,KAAK;wBAAS,MAAK;uBAAtB;;;;;oBAExC,OAAO,QAAQ,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM;wBACpC,IAAI,SAAS,IAAI,qBAAO,6LAAC;4BAA4B,WAAU;2BAA7B,GAAG,EAAE,CAAC,EAAE,SAAS;;;;;wBACnD,MAAM,WAAW,KAAK,KAAK,CAAC;wBAC5B,qBACE,6LAAC;4BAA0B,WAAU;sCAClC,SAAS,GAAG,CAAC,CAAC,KAAK,IAAM,IAAI,UAAU,CAAC,SAAS,IAAI,QAAQ,CAAC,sBAAQ,6LAAC;oCAAe,WAAU;8CAA+C,IAAI,KAAK,CAAC,GAAG,CAAC;mCAA1E;;;;2CAAyF;2BADvK,GAAG,EAAE,CAAC,EAAE,SAAS;;;;;oBAI7B;gBACF;eAlBS;;;;;QAqBf;;;;;;AAGN;KApEa","debugId":null}},
    {"offset": {"line": 2123, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/MessageItem.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { Check, Copy, RefreshCw, ThumbsUp, ThumbsDown, Globe, FileText } from 'lucide-react';\r\nimport { Message, TableData } from '../../types/chat';\r\nimport { formatTime } from '../../utils/formatHelpers';\r\nimport { formatFileSize } from '../../utils/fileHelpers';\r\nimport { MarkdownRenderer } from './MarkdownRenderer';\r\nimport { EmbeddedTable } from './EmbeddedTable';\r\n\r\ninterface MessageItemProps {\r\n  msg: Message;\r\n  onRerun: (id: string) => void;\r\n  onFeedback: (id: string, type: 'like' | 'dislike') => void;\r\n  // Updated signature to support optional visualHint parameter\r\n  onExpandTable?: (data: TableData, fileName: string, visualHint?: string) => void;\r\n}\r\n\r\nexport const MessageItem: React.FC<MessageItemProps> = ({ msg, onRerun, onFeedback, onExpandTable }) => {\r\n  const [isCopied, setIsCopied] = useState(false);\r\n  const [isRerunSuccess, setIsRerunSuccess] = useState(false);\r\n\r\n  const handleCopy = () => {\r\n    navigator.clipboard.writeText(msg.text);\r\n    setIsCopied(true);\r\n    setTimeout(() => setIsCopied(false), 2000);\r\n  };\r\n\r\n  const handleRerun = () => {\r\n    onRerun(msg.id);\r\n    setIsRerunSuccess(true);\r\n    setTimeout(() => setIsRerunSuccess(false), 2000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full group\">\r\n      <div className={`max-w-3xl mx-auto px-4 py-6 flex gap-6 ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n        <div className={`${msg.role === 'user' ? 'bg-[#f4f4f4] dark:bg-[#2f2f2f] px-5 py-3.5 rounded-3xl text-gray-900 dark:text-white max-w-[85%]' : 'w-full text-gray-900 dark:text-gray-100'} leading-7`}>\r\n          {msg.role === 'user' && msg.attachments && msg.attachments.length > 0 && (\r\n            <div className=\"flex flex-col gap-2 mb-3\">\r\n              {msg.attachments.map((att, i) => {\r\n                if (att.tableData) {\r\n                   return (\r\n                       <EmbeddedTable \r\n                         key={i} \r\n                         data={att.tableData} \r\n                         fileName={att.name} \r\n                         onExpand={() => onExpandTable && onExpandTable(att.tableData!, att.name)} \r\n                       />\r\n                   );\r\n                }\r\n                return (\r\n                  <div key={i} className=\"flex flex-wrap gap-2\">\r\n                    {att.mimeType.startsWith('image/') ? (\r\n                      <img src={att.previewUrl} alt=\"attachment\" className=\"max-w-full h-auto max-h-64 rounded-xl border border-gray-200 dark:border-[#444]\" />\r\n                    ) : (\r\n                      <div className=\"flex items-center gap-3 p-3 rounded-xl bg-white dark:bg-[#383838] border border-gray-200 dark:border-[#444] max-w-xs w-full shadow-sm\">\r\n                        <div className=\"p-2.5 bg-gray-100 dark:bg-[#2a2a2a] rounded-lg text-blue-600 dark:text-blue-400\">\r\n                          <FileText size={20} />\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"text-sm font-medium truncate text-gray-900 dark:text-gray-100\">{att.name}</div>\r\n                          <div className=\"text-xs text-gray-500 dark:text-gray-400\">{formatFileSize(att.size)}</div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n          \r\n          {msg.role === 'model' ? (\r\n            <>\r\n              <MarkdownRenderer \r\n                content={msg.text} \r\n                executionResult={msg.executionResult}\r\n                executionResults={msg.executionResults}\r\n                onExpandTable={onExpandTable}\r\n              />\r\n              \r\n              {msg.groundingMetadata?.groundingChunks && (\r\n                <div className=\"mt-3 pt-3 border-t border-gray-100 dark:border-[#333] flex flex-wrap gap-2\">\r\n                  {msg.groundingMetadata.groundingChunks.map((chunk: any, i: number) => chunk.web?.uri && (\r\n                    <a key={i} href={chunk.web.uri} target=\"_blank\" rel=\"noreferrer\" className=\"flex items-center gap-1.5 px-2 py-1 rounded bg-gray-50 dark:bg-[#1a1a1a] text-[10px] text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 border border-gray-200 dark:border-[#333] transition-colors\">\r\n                      <Globe size={10} /><span className=\"truncate max-w-[150px]\">{chunk.web.title || 'Source'}</span>\r\n                    </a>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {!msg.isStreaming && (\r\n                <div className=\"flex items-center gap-3 mt-4 select-none\">\r\n                  <button onClick={handleCopy} className=\"p-1 text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-gray-300 transition-colors\">\r\n                    {isCopied ? <Check size={14} /> : <Copy size={14} />}\r\n                  </button>\r\n                  <button onClick={handleRerun} className=\"p-1 text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-gray-300 transition-colors\">\r\n                    {isRerunSuccess ? <Check size={14} /> : <RefreshCw size={14} />}\r\n                  </button>\r\n                  <button onClick={() => onFeedback(msg.id, 'like')} className={`p-1 transition-colors ${msg.feedback === 'like' ? 'text-black dark:text-white' : 'text-gray-300 dark:text-gray-600 hover:text-gray-700'}`}>\r\n                    <ThumbsUp size={14} fill={msg.feedback === 'like' ? \"currentColor\" : \"none\"} />\r\n                  </button>\r\n                  <button onClick={() => onFeedback(msg.id, 'dislike')} className={`p-1 transition-colors ${msg.feedback === 'dislike' ? 'text-black dark:text-white' : 'text-gray-300 dark:text-gray-600 hover:text-gray-700'}`}>\r\n                    <ThumbsDown size={14} fill={msg.feedback === 'dislike' ? \"currentColor\" : \"none\"} />\r\n                  </button>\r\n                  <span className=\"ml-2 text-[9px] text-gray-300 dark:text-gray-700 font-mono pt-0.5\">{formatTime(msg.timestamp)}</span>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div className=\"whitespace-pre-wrap\">{msg.text}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2427, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/utils/tableUtils.ts"],"sourcesContent":["\r\nimport { TableData } from \"../types/chat\";\r\n\r\nexport const parseCSV = (text: string): TableData => {\r\n  const lines = text.split('\\n').filter(l => l.trim());\r\n  if (lines.length === 0) return { headers: [], rows: [] };\r\n  \r\n  // Simple CSV parser (does not handle quoted commas for this prototype)\r\n  const headers = lines[0].split(',').map(h => h.trim());\r\n  const rows = lines.slice(1).map((line, idx) => {\r\n    const values = line.split(',');\r\n    const row: any = { id: `row-${idx}` }; // Add internal ID\r\n    headers.forEach((h, i) => {\r\n      let val: string | number = values[i]?.trim();\r\n      // Attempt number conversion\r\n      if (!isNaN(Number(val)) && val !== '') {\r\n        val = Number(val);\r\n      }\r\n      row[h] = val;\r\n    });\r\n    return row;\r\n  });\r\n  \r\n  return { headers, rows };\r\n};\r\n\r\nexport const parseJSON = (text: string): TableData => {\r\n  try {\r\n    const data = JSON.parse(text);\r\n    if (Array.isArray(data) && data.length > 0) {\r\n      const headers = Object.keys(data[0]);\r\n      const rows = data.map((row: any, idx: number) => ({ ...row, id: `row-${idx}` }));\r\n      return { headers, rows };\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Failed to parse JSON\", e);\r\n  }\r\n  return { headers: [], rows: [] };\r\n};\r\n\r\nexport const exportToCSV = (data: TableData): string => {\r\n  const headerLine = data.headers.join(',');\r\n  const rowLines = data.rows.map(row => {\r\n    return data.headers.map(h => row[h]).join(',');\r\n  });\r\n  return [headerLine, ...rowLines].join('\\n');\r\n};\r\n\r\n// Pivot Logic\r\nexport interface PivotConfig {\r\n  rows: string[];\r\n  columns: string[];\r\n  values: string[];\r\n  aggregation: 'sum' | 'count' | 'average' | 'min' | 'max';\r\n}\r\n\r\nexport const generatePivot = (data: any[], config: PivotConfig) => {\r\n  const { rows, columns, values, aggregation } = config;\r\n  \r\n  // Allow generation if at least Rows OR Columns are specified. \r\n  // If Values are empty, we will just count the occurrences.\r\n  if (rows.length === 0 && columns.length === 0) return null;\r\n\r\n  const pivotData: any = {};\r\n  const colKeys = new Set<string>();\r\n\r\n  data.forEach(item => {\r\n    const rowKey = rows.length > 0 ? rows.map(r => item[r]).join(' - ') : 'Total';\r\n    const colKey = columns.length > 0 ? columns.map(c => item[c]).join(' - ') : 'Total';\r\n    \r\n    if (columns.length > 0) colKeys.add(colKey);\r\n    else colKeys.add('Total'); // Default column if none selected\r\n\r\n    if (!pivotData[rowKey]) pivotData[rowKey] = { name: rowKey };\r\n    if (!pivotData[rowKey][colKey]) pivotData[rowKey][colKey] = [];\r\n\r\n    if (values.length > 0) {\r\n        pivotData[rowKey][colKey].push(item[values[0]]);\r\n    } else {\r\n        // If no value column is selected, we treat existence as 1 for counting\r\n        pivotData[rowKey][colKey].push(1);\r\n    }\r\n  });\r\n\r\n  const result: any[] = [];\r\n  Object.keys(pivotData).forEach(rowKey => {\r\n    const rowObj: any = { name: rowKey };\r\n    const allColKeys = Array.from(colKeys);\r\n    \r\n    allColKeys.forEach(colKey => {\r\n       const vals = pivotData[rowKey][colKey] || [];\r\n       let aggVal = 0;\r\n       \r\n       // If no values were selected, force aggregation to count (or sum of 1s)\r\n       const effectiveAgg = values.length === 0 ? 'count' : aggregation;\r\n\r\n       if (effectiveAgg === 'count') aggVal = vals.length;\r\n       else if (effectiveAgg === 'sum') aggVal = vals.reduce((a: number, b: number) => a + Number(b), 0);\r\n       else if (effectiveAgg === 'average') aggVal = vals.length ? vals.reduce((a: number, b: number) => a + Number(b), 0) / vals.length : 0;\r\n       else if (effectiveAgg === 'min') aggVal = vals.length ? Math.min(...vals) : 0;\r\n       else if (effectiveAgg === 'max') aggVal = vals.length ? Math.max(...vals) : 0;\r\n       \r\n       rowObj[colKey] = parseFloat(aggVal.toFixed(2));\r\n    });\r\n    result.push(rowObj);\r\n  });\r\n\r\n  return { data: result, columns: Array.from(colKeys) };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2550, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/AttachmentPreview.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { X, FileText } from 'lucide-react';\r\nimport { Attachment } from '../../types/chat';\r\n\r\ninterface AttachmentPreviewProps {\r\n  attachments: Attachment[];\r\n  onRemove: (index: number) => void;\r\n}\r\n\r\nexport const AttachmentPreview: React.FC<AttachmentPreviewProps> = ({ attachments, onRemove }) => {\r\n  if (attachments.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap gap-4 px-2 pb-2 mb-2\">\r\n      {attachments.map((att, i) => (\r\n        <div key={i} className=\"relative group animate-in fade-in zoom-in-95 duration-200\">\r\n          <div className=\"w-20 h-20 rounded-2xl overflow-hidden border border-gray-200 dark:border-[#444] bg-white dark:bg-[#2a2a2a] flex flex-col items-center justify-center relative shadow-sm\">\r\n            {att.mimeType.startsWith('image/') ? (\r\n               <img src={att.previewUrl} alt={att.name} className=\"w-full h-full object-cover\" />\r\n            ) : (\r\n               <div className=\"flex flex-col items-center justify-center h-full w-full p-2 text-center\">\r\n                  <FileText size={24} className=\"text-gray-400 dark:text-gray-500 mb-1.5\" />\r\n                  <span className=\"text-[9px] leading-tight text-gray-500 dark:text-gray-400 w-full truncate px-1 font-medium\">{att.name}</span>\r\n               </div>\r\n            )}\r\n          </div>\r\n          <button\r\n            onClick={() => onRemove(i)}\r\n            className=\"absolute -top-2 -right-2 bg-gray-900 dark:bg-gray-700 text-white rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:scale-110\"\r\n          >\r\n            <X size={12} strokeWidth={3} />\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;;;AAQO,MAAM,oBAAsD,CAAC,EAAE,WAAW,EAAE,QAAQ,EAAE;IAC3F,IAAI,YAAY,MAAM,KAAK,GAAG,OAAO;IAErC,qBACE,6LAAC;QAAI,WAAU;kBACZ,YAAY,GAAG,CAAC,CAAC,KAAK,kBACrB,6LAAC;gBAAY,WAAU;;kCACrB,6LAAC;wBAAI,WAAU;kCACZ,IAAI,QAAQ,CAAC,UAAU,CAAC,0BACtB,6LAAC;4BAAI,KAAK,IAAI,UAAU;4BAAE,KAAK,IAAI,IAAI;4BAAE,WAAU;;;;;iDAEnD,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC,iNAAA,CAAA,WAAQ;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAC9B,6LAAC;oCAAK,WAAU;8CAA8F,IAAI,IAAI;;;;;;;;;;;;;;;;;kCAI9H,6LAAC;wBACC,SAAS,IAAM,SAAS;wBACxB,WAAU;kCAEV,cAAA,6LAAC,+LAAA,CAAA,IAAC;4BAAC,MAAM;4BAAI,aAAa;;;;;;;;;;;;eAfpB;;;;;;;;;;AAqBlB;KA3Ba","debugId":null}},
    {"offset": {"line": 2645, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/InputArea.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport { ArrowUp, ArrowRight, Box, Globe, Paperclip, Loader2, Sparkles, Wand2 } from 'lucide-react';\r\nimport { ModelOption, Attachment } from '../../types/chat';\r\nimport { MODELS } from '../../constants/chat';\r\nimport { fileToDataUrl } from '../../utils/fileHelpers';\r\nimport { parseCSV, parseJSON } from '../../utils/tableUtils';\r\nimport { AttachmentPreview } from './AttachmentPreview';\r\nimport { GoogleGenAI } from '@google/genai';\r\n\r\ninterface InputAreaProps {\r\n  query: string;\r\n  setQuery: (q: string) => void;\r\n  onSend: () => void;\r\n  isGenerating: boolean;\r\n  onStartVoice: () => void;\r\n  selectedModel: ModelOption;\r\n  setSelectedModel: (m: ModelOption) => void;\r\n  useSearch: boolean;\r\n  setUseSearch: (b: boolean) => void;\r\n  isAnalyzeMode: boolean;\r\n  setIsAnalyzeMode: (b: boolean) => void;\r\n  attachments: Attachment[];\r\n  setAttachments: (atts: Attachment[]) => void;\r\n}\r\n\r\n// --- High Fidelity Sub-components ---\r\n\r\nconst ChatPill = ({ active, onClick, icon: Icon, label, disabled = false }: any) => (\r\n  <button \r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    className={`\r\n      flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[13px] font-medium transition-all border outline-none\r\n      ${active \r\n        ? 'bg-gray-100 dark:bg-[#3d3d3d] text-gray-900 dark:text-white border-gray-300 dark:border-[#555]' \r\n        : 'bg-transparent text-gray-500 dark:text-gray-400 border-transparent hover:bg-gray-50 dark:hover:bg-[#333]'\r\n      }\r\n      ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\r\n    `}\r\n  >\r\n    <Icon size={14} strokeWidth={2} className={label === \"Polishing...\" ? \"animate-spin\" : \"\"} />\r\n    <span>{label}</span>\r\n  </button>\r\n);\r\n\r\nconst PrimaryAction = ({ onClick, icon: Icon, label, variant = 'primary', disabled = false, className = '' }: any) => (\r\n  <button\r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    className={`\r\n      flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all active:scale-95\r\n      ${variant === 'primary' \r\n        ? 'bg-black dark:bg-white text-white dark:text-black hover:opacity-90' \r\n        : 'bg-gray-100 dark:bg-[#333] text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-[#444]'\r\n      }\r\n      ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\r\n    `}\r\n  >\r\n    {label && <span>{label}</span>}\r\n    <Icon size={16} strokeWidth={2.5} className={className} />\r\n  </button>\r\n);\r\n\r\nexport const InputArea: React.FC<InputAreaProps> = (props) => {\r\n  const [isModelMenuOpen, setIsModelMenuOpen] = useState(false);\r\n  const [isRewriting, setIsRewriting] = useState(false);\r\n  \r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const taRef = useRef<HTMLTextAreaElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClick = (e: MouseEvent) => { \r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        setIsModelMenuOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClick);\r\n    return () => document.removeEventListener('mousedown', handleClick);\r\n  }, []);\r\n\r\n  useEffect(() => { \r\n    if (taRef.current) { \r\n      taRef.current.style.height = 'auto'; \r\n      taRef.current.style.height = `${Math.min(taRef.current.scrollHeight, 200)}px`; \r\n    } \r\n  }, [props.query]);\r\n\r\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files) {\r\n      const files = Array.from(e.target.files) as File[];\r\n      const newAttachments = await Promise.all(files.map(async file => {\r\n        const base64 = await fileToDataUrl(file);\r\n        let tableData = undefined;\r\n        if (file.type === 'text/csv' || file.name.endsWith('.csv')) {\r\n          tableData = parseCSV(await file.text());\r\n        } else if (file.type === 'application/json' || file.name.endsWith('.json')) {\r\n          tableData = parseJSON(await file.text());\r\n        }\r\n        return { file, previewUrl: base64, base64, mimeType: file.type, name: file.name, size: file.size, tableData };\r\n      }));\r\n      props.setAttachments([...props.attachments, ...newAttachments]);\r\n      if (fileInputRef.current) fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handleRewrite = async () => {\r\n    if (!props.query.trim() || isRewriting) return;\r\n    setIsRewriting(true);\r\n    try {\r\n        const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n        const response = await ai.models.generateContent({\r\n            model: 'gemini-flash-lite-latest',\r\n            contents: `Improve the clarity and tone of this message for an AI assistant. Output only the improved text. Text: \"${props.query}\"`,\r\n        });\r\n        if (response.text) props.setQuery(response.text.trim());\r\n    } catch (e) { console.error(e); } \r\n    finally { setIsRewriting(false); }\r\n  };\r\n\r\n  const hasContent = props.query.trim().length > 0 || props.attachments.length > 0;\r\n\r\n  return (\r\n    <div className=\"w-full px-4 pb-8 pt-2 z-10 bg-white/95 dark:bg-[#212121]/95 backdrop-blur-xl\">\r\n      <div className=\"max-w-3xl mx-auto relative flex flex-col gap-4\">\r\n        <input type=\"file\" multiple ref={fileInputRef} onChange={handleFileSelect} className=\"hidden\" />\r\n\r\n        {/* Mode Switcher - Lighter fonts, no shadow */}\r\n        <div className=\"flex justify-center\">\r\n            <div className=\"flex items-center p-1 bg-gray-100 dark:bg-[#2f2f2f] rounded-full\">\r\n                <button\r\n                    onClick={() => props.setIsAnalyzeMode(false)}\r\n                    className={`px-6 py-1.5 rounded-full text-xs font-medium uppercase tracking-widest transition-all ${!props.isAnalyzeMode ? 'bg-white dark:bg-[#1e1e1e] text-black dark:text-white border border-gray-200 dark:border-[#444]' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'}`}\r\n                >\r\n                    Chat\r\n                </button>\r\n                <button\r\n                    onClick={() => props.setIsAnalyzeMode(true)}\r\n                    className={`px-6 py-1.5 rounded-full text-xs font-medium uppercase tracking-widest transition-all ${props.isAnalyzeMode ? 'bg-white dark:bg-[#1e1e1e] text-black dark:text-white border border-gray-200 dark:border-[#444]' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'}`}\r\n                >\r\n                    Analyst\r\n                </button>\r\n            </div>\r\n        </div>\r\n        \r\n        {/* Unified Stadium Input Container - No shadows, clean borders */}\r\n        <div className=\"bg-[#f4f4f4] dark:bg-[#2f2f2f] rounded-[32px] border border-gray-200 dark:border-[#444] p-4 pb-3 transition-all duration-300 relative group\">\r\n            \r\n            <AttachmentPreview attachments={props.attachments} onRemove={(i) => props.setAttachments(props.attachments.filter((_, idx) => idx !== i))} />\r\n            \r\n            <textarea \r\n              ref={taRef} \r\n              value={props.query} \r\n              onChange={e => props.setQuery(e.target.value)} \r\n              onKeyDown={e => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); props.onSend(); } }} \r\n              placeholder={props.isAnalyzeMode ? \"Describe the analysis you need...\" : \"Ask Auxiliary\"}\r\n              className=\"w-full bg-transparent border-none focus:ring-0 outline-none resize-none text-[16px] text-gray-900 dark:text-white placeholder-gray-400 placeholder:text-opacity-50 dark:placeholder:text-opacity-50 leading-relaxed p-0 mb-4 max-h-[200px] overflow-y-auto no-scrollbar font-normal appearance-none\" \r\n              rows={1}\r\n              style={{ backgroundColor: 'transparent' }}\r\n            />\r\n\r\n            <div className=\"flex items-center justify-between gap-2 mt-auto\">\r\n                <div className=\"flex items-center gap-1.5 flex-wrap relative\">\r\n                    <ChatPill \r\n                      onClick={() => fileInputRef.current?.click()} \r\n                      icon={Paperclip} \r\n                      label=\"Attach\" \r\n                    />\r\n                    <ChatPill \r\n                      active={props.useSearch} \r\n                      onClick={() => props.setUseSearch(!props.useSearch)} \r\n                      icon={Globe} \r\n                      label=\"Search\" \r\n                    />\r\n                    \r\n                    {/* Model Dropdown Trigger */}\r\n                    <div className=\"relative\">\r\n                        <ChatPill \r\n                            active={isModelMenuOpen}\r\n                            onClick={() => setIsModelMenuOpen(!isModelMenuOpen)}\r\n                            icon={Box} \r\n                            label=\"Model\" \r\n                        />\r\n                        {isModelMenuOpen && (\r\n                            <div ref={menuRef} className=\"absolute bottom-full left-0 mb-2 w-64 bg-white dark:bg-[#1e1e1e] rounded-2xl border border-gray-200 dark:border-[#444] overflow-hidden z-50 p-2 animate-in fade-in zoom-in-95 duration-200\">\r\n                                {MODELS.map(m => (\r\n                                    <button \r\n                                        key={m.id}\r\n                                        onClick={() => { props.setSelectedModel(m); setIsModelMenuOpen(false); }}\r\n                                        className={`w-full flex items-center justify-between px-3 py-2.5 rounded-xl text-left transition-colors ${props.selectedModel.id === m.id ? 'bg-gray-100 dark:bg-[#333]' : 'hover:bg-gray-50 dark:hover:bg-[#2a2a2a]'}`}\r\n                                    >\r\n                                        <div>\r\n                                            <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{m.name}</div>\r\n                                            <div className=\"text-[10px] text-gray-500\">{m.desc}</div>\r\n                                        </div>\r\n                                        {props.selectedModel.id === m.id && <div className=\"w-1.5 h-1.5 rounded-full bg-green-500\" />}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Polish Button - Only appears when text exists */}\r\n                    {hasContent && (\r\n                      <ChatPill \r\n                        active={false} \r\n                        onClick={handleRewrite} \r\n                        icon={isRewriting ? Loader2 : Wand2} \r\n                        label={isRewriting ? \"Polishing...\" : \"Polish\"}\r\n                        disabled={isRewriting}\r\n                      />\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                   <PrimaryAction \r\n                    onClick={props.onSend} \r\n                    icon={props.isGenerating ? Loader2 : (hasContent ? ArrowUp : ArrowRight)} \r\n                    label={props.isAnalyzeMode ? \"Analyze\" : \"Ask\"}\r\n                    disabled={props.isGenerating}\r\n                    className={props.isGenerating ? \"animate-spin\" : \"\"}\r\n                   />\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3068, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/VoiceOverlay.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { X, Mic, MicOff } from 'lucide-react';\r\n\r\ninterface VoiceOverlayProps {\r\n  status: string;\r\n  audioLevel: number;\r\n  isMuted: boolean;\r\n  onClose: () => void;\r\n  onToggleMic: () => void;\r\n}\r\n\r\nexport const VoiceOverlay: React.FC<VoiceOverlayProps> = ({ status, audioLevel, isMuted, onClose, onToggleMic }) => {\r\n  return (\r\n    <div className=\"absolute inset-0 z-50 bg-white dark:bg-[#212121] flex flex-col items-center justify-center animate-in fade-in\">\r\n      <div className=\"absolute top-0 left-0 right-0 p-6 flex justify-between items-center\">\r\n        <div className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-[#2f2f2f] rounded-full border border-gray-100 dark:border-[#333]\">\r\n          <div className={`w-2 h-2 rounded-full ${['listening', 'speaking'].includes(status) ? 'bg-black dark:bg-white animate-pulse' : 'bg-gray-400'}`} />\r\n          <span className=\"text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\r\n            {status === 'connecting' ? 'Connecting...' : 'Live Session'}\r\n          </span>\r\n        </div>\r\n        <button onClick={onClose} className=\"p-2 text-gray-500 hover:text-black dark:hover:text-white transition-colors hover:bg-gray-50 dark:hover:bg-[#2f2f2f] rounded-full\">\r\n          <X size={24} strokeWidth={1.5} />\r\n        </button>\r\n      </div>\r\n      <div className=\"relative w-full max-w-md aspect-square flex items-center justify-center\">\r\n        <div className=\"absolute inset-0 rounded-full border border-gray-200 dark:border-[#333] transition-all duration-300\" style={{ transform: `scale(${1 + audioLevel * 2.5})`, opacity: Math.min(audioLevel * 1.5, 0.4) }} />\r\n        <div className=\"absolute inset-20 rounded-full border border-gray-300 dark:border-[#444] transition-all duration-200\" style={{ transform: `scale(${1 + audioLevel * 1.5})`, opacity: Math.min(audioLevel * 2, 0.6) }} />\r\n        <div className=\"w-32 h-32 rounded-full bg-black dark:bg-white shadow-2xl dark:shadow-white/5 flex items-center justify-center z-10\" style={{ transform: `scale(${Math.max(1, 1 + audioLevel)})` }}>\r\n          {status === 'connecting' ? <div className=\"w-8 h-8 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : <div className=\"w-full h-full rounded-full bg-gradient-to-b from-white/10 to-transparent\" />}\r\n        </div>\r\n      </div>\r\n      <p className=\"mt-8 text-xl font-medium text-gray-900 dark:text-white\">{status === 'listening' ? 'Listening...' : status === 'speaking' ? 'Speaking...' : 'Connecting...'}</p>\r\n      <div className=\"absolute bottom-12 flex items-center gap-6\">\r\n        <button onClick={onToggleMic} className={`p-5 rounded-full border transition-all ${isMuted ? 'bg-gray-100 border-gray-200 text-gray-400 dark:bg-[#2a2a2a]' : 'bg-white border-gray-200 text-gray-900 dark:bg-[#212121] dark:text-white'}`}>\r\n          {isMuted ? <MicOff size={24} strokeWidth={1.5} /> : <Mic size={24} strokeWidth={1.5} />}\r\n        </button>\r\n        <button onClick={onClose} className=\"px-8 py-5 rounded-full bg-black dark:bg-white text-white dark:text-black font-medium text-sm hover:scale-105 transition-all\">End Session</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;;;AAUO,MAAM,eAA4C,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE;IAC7G,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAW,CAAC,qBAAqB,EAAE;oCAAC;oCAAa;iCAAW,CAAC,QAAQ,CAAC,UAAU,yCAAyC,eAAe;;;;;;0CAC7I,6LAAC;gCAAK,WAAU;0CACb,WAAW,eAAe,kBAAkB;;;;;;;;;;;;kCAGjD,6LAAC;wBAAO,SAAS;wBAAS,WAAU;kCAClC,cAAA,6LAAC,+LAAA,CAAA,IAAC;4BAAC,MAAM;4BAAI,aAAa;;;;;;;;;;;;;;;;;0BAG9B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;wBAAsG,OAAO;4BAAE,WAAW,CAAC,MAAM,EAAE,IAAI,aAAa,IAAI,CAAC,CAAC;4BAAE,SAAS,KAAK,GAAG,CAAC,aAAa,KAAK;wBAAK;;;;;;kCACpN,6LAAC;wBAAI,WAAU;wBAAuG,OAAO;4BAAE,WAAW,CAAC,MAAM,EAAE,IAAI,aAAa,IAAI,CAAC,CAAC;4BAAE,SAAS,KAAK,GAAG,CAAC,aAAa,GAAG;wBAAK;;;;;;kCACnN,6LAAC;wBAAI,WAAU;wBAAqH,OAAO;4BAAE,WAAW,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,GAAG,IAAI,YAAY,CAAC,CAAC;wBAAC;kCAC7L,WAAW,6BAAe,6LAAC;4BAAI,WAAU;;;;;iDAAiF,6LAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;0BAG9I,6LAAC;gBAAE,WAAU;0BAA0D,WAAW,cAAc,iBAAiB,WAAW,aAAa,gBAAgB;;;;;;0BACzJ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,SAAS;wBAAa,WAAW,CAAC,uCAAuC,EAAE,UAAU,gEAAgE,4EAA4E;kCACtO,wBAAU,6LAAC,6MAAA,CAAA,SAAM;4BAAC,MAAM;4BAAI,aAAa;;;;;iDAAU,6LAAC,mMAAA,CAAA,MAAG;4BAAC,MAAM;4BAAI,aAAa;;;;;;;;;;;kCAElF,6LAAC;wBAAO,SAAS;wBAAS,WAAU;kCAA8H;;;;;;;;;;;;;;;;;;AAI1K;KA9Ba","debugId":null}},
    {"offset": {"line": 3255, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/table/views/DataGridView.tsx"],"sourcesContent":["\r\n\r\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\r\nimport { Plus, Filter, Trash2 } from 'lucide-react';\r\n\r\ninterface DataGridViewProps {\r\n  headers: string[];\r\n  rows: any[];\r\n  onRowUpdate: (id: string, updates: Record<string, any>) => void;\r\n  onAddRow: () => void;\r\n  onDeleteRow: (id: string) => void;\r\n  filters: Record<string, string>;\r\n  setFilters: (filters: Record<string, string>) => void;\r\n  sortConfig: { key: string; dir: 'asc' | 'desc' } | null;\r\n  setSortConfig: (config: { key: string; dir: 'asc' | 'desc' } | null) => void;\r\n}\r\n\r\nexport const DataGridView: React.FC<DataGridViewProps> = ({\r\n  headers,\r\n  rows,\r\n  onRowUpdate,\r\n  onAddRow,\r\n  onDeleteRow,\r\n  filters,\r\n  setFilters,\r\n  sortConfig,\r\n  setSortConfig,\r\n}) => {\r\n  const [selectedCell, setSelectedCell] = useState<{ r: number; c: string } | null>(null);\r\n  const [colWidths, setColWidths] = useState<Record<string, number>>({});\r\n  const resizingRef = useRef<{ startX: number; startWidth: number; header: string } | null>(null);\r\n  \r\n  // Lazy Loading State\r\n  const [visibleCount, setVisibleCount] = useState(50);\r\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Initial width setup\r\n  useEffect(() => {\r\n    const widths: Record<string, number> = {};\r\n    headers.forEach((h) => (widths[h] = 150));\r\n    setColWidths(widths);\r\n  }, [headers]);\r\n\r\n  // Reset lazy load on filter/sort/data change\r\n  useEffect(() => {\r\n    setVisibleCount(50);\r\n    if (scrollContainerRef.current) {\r\n      scrollContainerRef.current.scrollTop = 0;\r\n    }\r\n  }, [filters, sortConfig, rows.length]);\r\n\r\n  const handleCellEdit = (id: string, key: string, val: string) => {\r\n    onRowUpdate(id, { [key]: val });\r\n  };\r\n\r\n  // Scroll Handler for Lazy Loading\r\n  const handleScroll = useCallback((e: React.UIEvent<HTMLDivElement>) => {\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    // Load more when within 200px of bottom\r\n    if (scrollHeight - scrollTop <= clientHeight + 200) {\r\n      if (visibleCount < rows.length) {\r\n         setVisibleCount(prev => Math.min(prev + 50, rows.length));\r\n      }\r\n    }\r\n  }, [rows.length, visibleCount]);\r\n\r\n  // Resizing Logic\r\n  const handleResizeMouseDown = (e: React.MouseEvent, header: string) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    resizingRef.current = { startX: e.clientX, startWidth: colWidths[header] || 150, header };\r\n    document.addEventListener('mousemove', handleResizeMouseMove);\r\n    document.addEventListener('mouseup', handleResizeMouseUp);\r\n  };\r\n\r\n  const handleResizeMouseMove = useCallback((e: MouseEvent) => {\r\n    if (!resizingRef.current) return;\r\n    const { startX, startWidth, header } = resizingRef.current;\r\n    const diff = e.clientX - startX;\r\n    setColWidths((prev) => ({ ...prev, [header]: Math.max(60, startWidth + diff) }));\r\n  }, []);\r\n\r\n  const handleResizeMouseUp = useCallback(() => {\r\n    resizingRef.current = null;\r\n    document.removeEventListener('mousemove', handleResizeMouseMove);\r\n    document.removeEventListener('mouseup', handleResizeMouseUp);\r\n  }, [handleResizeMouseMove]);\r\n\r\n  const visibleRows = rows.slice(0, visibleCount);\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-[#F5F5F7] dark:bg-[#1e1e1e]\">\r\n      {/* Toolbar */}\r\n      <div className=\"flex items-center gap-2 p-2 border-b border-gray-200 dark:border-[#333] bg-white/80 dark:bg-[#252525]/80 backdrop-blur-sm flex-shrink-0\">\r\n        <button\r\n          onClick={onAddRow}\r\n          className=\"flex items-center gap-1 px-3 py-1.5 text-xs font-medium bg-white dark:bg-[#333] border border-gray-200 dark:border-[#444] hover:bg-gray-50 dark:hover:bg-[#444] text-gray-700 dark:text-gray-200 transition-colors rounded-md shadow-sm\"\r\n        >\r\n          <Plus size={14} /> Row\r\n        </button>\r\n        <div className=\"h-4 w-px bg-gray-300 dark:bg-[#444]\"></div>\r\n        <button\r\n          onClick={() => setFilters({})}\r\n          className=\"flex items-center gap-1 px-3 py-1.5 text-xs font-medium bg-white dark:bg-[#333] border border-gray-200 dark:border-[#444] hover:bg-gray-50 dark:hover:bg-[#444] text-gray-700 dark:text-gray-200 transition-colors rounded-md shadow-sm\"\r\n        >\r\n          <Filter size={14} /> Clear Filters\r\n        </button>\r\n        <span className=\"ml-auto text-xs text-gray-500\">\r\n           Showing {visibleRows.length} of {rows.length} rows\r\n        </span>\r\n      </div>\r\n\r\n      {/* Table Area */}\r\n      <div \r\n        className=\"flex-1 overflow-auto custom-scrollbar bg-[#F5F5F7] dark:bg-[#1e1e1e] p-4\"\r\n        onScroll={handleScroll}\r\n        ref={scrollContainerRef}\r\n      >\r\n        <div className=\"inline-block min-w-full bg-white dark:bg-[#1e1e1e] rounded-lg border border-gray-200 dark:border-[#333] shadow-sm overflow-hidden\">\r\n          {/* Headers */}\r\n          <div className=\"flex sticky top-0 z-20\">\r\n            <div className=\"w-10 flex-shrink-0 bg-gray-50 dark:bg-[#2b2b2b] border-r border-b border-gray-200 dark:border-[#444] h-8\"></div>\r\n            {headers.map((h) => (\r\n              <div\r\n                key={h}\r\n                className=\"relative flex-shrink-0 flex flex-col justify-center bg-gray-50 dark:bg-[#2b2b2b] border-r border-b border-gray-200 dark:border-[#444] h-8 px-2 group\"\r\n                style={{ width: colWidths[h] }}\r\n              >\r\n                <div className=\"flex items-center justify-between text-[11px] font-semibold text-gray-600 dark:text-gray-300 select-none\">\r\n                  <span\r\n                    onClick={() =>\r\n                      setSortConfig({\r\n                        key: h,\r\n                        dir: sortConfig?.key === h && sortConfig.dir === 'asc' ? 'desc' : 'asc',\r\n                      })\r\n                    }\r\n                    className=\"cursor-pointer hover:text-black dark:hover:text-white\"\r\n                  >\r\n                    {h} {sortConfig?.key === h && (sortConfig.dir === 'asc' ? '' : '')}\r\n                  </span>\r\n                </div>\r\n                <div\r\n                  className=\"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 z-30\"\r\n                  onMouseDown={(e) => handleResizeMouseDown(e, h)}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Filter Row */}\r\n          <div className=\"flex sticky top-8 z-20 bg-white dark:bg-[#252525]\">\r\n            <div className=\"w-10 flex-shrink-0 bg-white dark:bg-[#252525] border-r border-b border-gray-200 dark:border-[#444] h-8 flex items-center justify-center\">\r\n              <Filter size={10} className=\"text-gray-400\" />\r\n            </div>\r\n            {headers.map((h) => (\r\n              <div\r\n                key={`filter-${h}`}\r\n                className=\"flex-shrink-0 border-r border-b border-gray-200 dark:border-[#444] h-8 p-0\"\r\n                style={{ width: colWidths[h] }}\r\n              >\r\n                <input\r\n                  className=\"w-full h-full px-2 text-xs bg-transparent outline-none text-gray-600 dark:text-gray-300 placeholder-gray-300\"\r\n                  placeholder=\"Filter...\"\r\n                  value={filters[h] || ''}\r\n                  onChange={(e) => setFilters({ ...filters, [h]: e.target.value })}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Data Rows (Virtualized/Lazy Loaded Slice) */}\r\n          {visibleRows.map((row, rIdx) => (\r\n            <div key={row.id} className=\"flex group hover:bg-blue-50/50 dark:hover:bg-[#333] transition-colors\">\r\n              <div className=\"w-10 flex-shrink-0 bg-gray-50 dark:bg-[#2b2b2b] border-r border-b border-gray-100 dark:border-[#444] text-[10px] flex items-center justify-center text-gray-400 dark:text-gray-500 select-none font-mono group-hover:bg-gray-100 dark:group-hover:bg-[#383838] relative\">\r\n                {rIdx + 1}\r\n                <button\r\n                  onClick={() => onDeleteRow(row.id)}\r\n                  className=\"absolute left-0.5 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 text-red-500 p-1\"\r\n                >\r\n                  <Trash2 size={10} />\r\n                </button>\r\n              </div>\r\n              {headers.map((h) => {\r\n                const isSelected = selectedCell?.r === rIdx && selectedCell?.c === h;\r\n                return (\r\n                  <div\r\n                    key={`${row.id}-${h}`}\r\n                    className={`flex-shrink-0 border-r border-b border-gray-100 dark:border-[#444] h-8 p-0 relative ${\r\n                      rIdx % 2 === 0 ? 'bg-white dark:bg-[#1e1e1e]' : 'bg-[#fafbfc] dark:bg-[#232323]'\r\n                    } ${isSelected ? 'ring-2 ring-inset ring-blue-500 z-10' : ''}`}\r\n                    style={{ width: colWidths[h] }}\r\n                    onClick={() => setSelectedCell({ r: rIdx, c: h })}\r\n                  >\r\n                    <input\r\n                      className=\"w-full h-full px-2 bg-transparent border-none outline-none text-xs font-sans text-gray-800 dark:text-gray-200\"\r\n                      value={row[h] || ''}\r\n                      onChange={(e) => handleCellEdit(row.id, h, e.target.value)}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ))}\r\n          {/* Lazy Load Spinner */}\r\n          {visibleCount < rows.length && (\r\n             <div className=\"flex justify-center p-4 bg-gray-50 dark:bg-[#252525]\">\r\n                <div className=\"w-4 h-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin\"></div>\r\n             </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;;;;;AAcO,MAAM,eAA4C,CAAC,EACxD,OAAO,EACP,IAAI,EACJ,WAAW,EACX,QAAQ,EACR,WAAW,EACX,OAAO,EACP,UAAU,EACV,UAAU,EACV,aAAa,EACd;;IACC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAmC;IAClF,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAA0B,CAAC;IACpE,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAiE;IAE1F,qBAAqB;IACrB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,qBAAqB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAElD,sBAAsB;IACtB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,SAAiC,CAAC;YACxC,QAAQ,OAAO;0CAAC,CAAC,IAAO,MAAM,CAAC,EAAE,GAAG;;YACpC,aAAa;QACf;iCAAG;QAAC;KAAQ;IAEZ,6CAA6C;IAC7C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,gBAAgB;YAChB,IAAI,mBAAmB,OAAO,EAAE;gBAC9B,mBAAmB,OAAO,CAAC,SAAS,GAAG;YACzC;QACF;iCAAG;QAAC;QAAS;QAAY,KAAK,MAAM;KAAC;IAErC,MAAM,iBAAiB,CAAC,IAAY,KAAa;QAC/C,YAAY,IAAI;YAAE,CAAC,IAAI,EAAE;QAAI;IAC/B;IAEA,kCAAkC;IAClC,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;kDAAE,CAAC;YAChC,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,EAAE,aAAa;YACjE,wCAAwC;YACxC,IAAI,eAAe,aAAa,eAAe,KAAK;gBAClD,IAAI,eAAe,KAAK,MAAM,EAAE;oBAC7B;kEAAgB,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,IAAI,KAAK,MAAM;;gBAC1D;YACF;QACF;iDAAG;QAAC,KAAK,MAAM;QAAE;KAAa;IAE9B,iBAAiB;IACjB,MAAM,wBAAwB,CAAC,GAAqB;QAClD,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,YAAY,OAAO,GAAG;YAAE,QAAQ,EAAE,OAAO;YAAE,YAAY,SAAS,CAAC,OAAO,IAAI;YAAK;QAAO;QACxF,SAAS,gBAAgB,CAAC,aAAa;QACvC,SAAS,gBAAgB,CAAC,WAAW;IACvC;IAEA,MAAM,wBAAwB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;2DAAE,CAAC;YACzC,IAAI,CAAC,YAAY,OAAO,EAAE;YAC1B,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,YAAY,OAAO;YAC1D,MAAM,OAAO,EAAE,OAAO,GAAG;YACzB;mEAAa,CAAC,OAAS,CAAC;wBAAE,GAAG,IAAI;wBAAE,CAAC,OAAO,EAAE,KAAK,GAAG,CAAC,IAAI,aAAa;oBAAM,CAAC;;QAChF;0DAAG,EAAE;IAEL,MAAM,sBAAsB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;yDAAE;YACtC,YAAY,OAAO,GAAG;YACtB,SAAS,mBAAmB,CAAC,aAAa;YAC1C,SAAS,mBAAmB,CAAC,WAAW;QAC1C;wDAAG;QAAC;KAAsB;IAE1B,MAAM,cAAc,KAAK,KAAK,CAAC,GAAG;IAElC,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,6LAAC,qMAAA,CAAA,OAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEpB,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBACC,SAAS,IAAM,WAAW,CAAC;wBAC3B,WAAU;;0CAEV,6LAAC,yMAAA,CAAA,SAAM;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEtB,6LAAC;wBAAK,WAAU;;4BAAgC;4BACpC,YAAY,MAAM;4BAAC;4BAAK,KAAK,MAAM;4BAAC;;;;;;;;;;;;;0BAKlD,6LAAC;gBACC,WAAU;gBACV,UAAU;gBACV,KAAK;0BAEL,cAAA,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;;;;;gCACd,QAAQ,GAAG,CAAC,CAAC,kBACZ,6LAAC;wCAEC,WAAU;wCACV,OAAO;4CAAE,OAAO,SAAS,CAAC,EAAE;wCAAC;;0DAE7B,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDACC,SAAS,IACP,cAAc;4DACZ,KAAK;4DACL,KAAK,YAAY,QAAQ,KAAK,WAAW,GAAG,KAAK,QAAQ,SAAS;wDACpE;oDAEF,WAAU;;wDAET;wDAAE;wDAAE,YAAY,QAAQ,KAAK,CAAC,WAAW,GAAG,KAAK,QAAQ,MAAM,GAAG;;;;;;;;;;;;0DAGvE,6LAAC;gDACC,WAAU;gDACV,aAAa,CAAC,IAAM,sBAAsB,GAAG;;;;;;;uCAnB1C;;;;;;;;;;;sCA0BX,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,yMAAA,CAAA,SAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;gCAE7B,QAAQ,GAAG,CAAC,CAAC,kBACZ,6LAAC;wCAEC,WAAU;wCACV,OAAO;4CAAE,OAAO,SAAS,CAAC,EAAE;wCAAC;kDAE7B,cAAA,6LAAC;4CACC,WAAU;4CACV,aAAY;4CACZ,OAAO,OAAO,CAAC,EAAE,IAAI;4CACrB,UAAU,CAAC,IAAM,WAAW;oDAAE,GAAG,OAAO;oDAAE,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;gDAAC;;;;;;uCAR3D,CAAC,OAAO,EAAE,GAAG;;;;;;;;;;;wBAevB,YAAY,GAAG,CAAC,CAAC,KAAK,qBACrB,6LAAC;gCAAiB,WAAU;;kDAC1B,6LAAC;wCAAI,WAAU;;4CACZ,OAAO;0DACR,6LAAC;gDACC,SAAS,IAAM,YAAY,IAAI,EAAE;gDACjC,WAAU;0DAEV,cAAA,6LAAC,6MAAA,CAAA,SAAM;oDAAC,MAAM;;;;;;;;;;;;;;;;;oCAGjB,QAAQ,GAAG,CAAC,CAAC;wCACZ,MAAM,aAAa,cAAc,MAAM,QAAQ,cAAc,MAAM;wCACnE,qBACE,6LAAC;4CAEC,WAAW,CAAC,oFAAoF,EAC9F,OAAO,MAAM,IAAI,+BAA+B,iCACjD,CAAC,EAAE,aAAa,yCAAyC,IAAI;4CAC9D,OAAO;gDAAE,OAAO,SAAS,CAAC,EAAE;4CAAC;4CAC7B,SAAS,IAAM,gBAAgB;oDAAE,GAAG;oDAAM,GAAG;gDAAE;sDAE/C,cAAA,6LAAC;gDACC,WAAU;gDACV,OAAO,GAAG,CAAC,EAAE,IAAI;gDACjB,UAAU,CAAC,IAAM,eAAe,IAAI,EAAE,EAAE,GAAG,EAAE,MAAM,CAAC,KAAK;;;;;;2CAVtD,GAAG,IAAI,EAAE,CAAC,CAAC,EAAE,GAAG;;;;;oCAc3B;;+BA5BQ,IAAI,EAAE;;;;;wBAgCjB,eAAe,KAAK,MAAM,kBACxB,6LAAC;4BAAI,WAAU;sCACZ,cAAA,6LAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/B;GApMa;KAAA","debugId":null}},
    {"offset": {"line": 3644, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/table/views/PivotView.tsx"],"sourcesContent":["\r\n\r\nimport React, { useMemo, useState } from 'react';\r\nimport { Grid, X, Palette, Table as TableIcon } from 'lucide-react';\r\nimport { generatePivot, PivotConfig } from '../../../utils/tableUtils';\r\nimport { COLOR_THEMES } from '../types';\r\n\r\ninterface PivotViewProps {\r\n  headers: string[];\r\n  rows: any[];\r\n  config: PivotConfig;\r\n  setConfig: (config: PivotConfig) => void;\r\n}\r\n\r\nexport const PivotView: React.FC<PivotViewProps> = ({ headers, rows, config, setConfig }) => {\r\n  const [themeColor, setThemeColor] = useState<string>('blue');\r\n  const [showLabels, setShowLabels] = useState(false);\r\n\r\n  const pivotResult = useMemo(() => {\r\n    return generatePivot(rows, config);\r\n  }, [rows, config]);\r\n\r\n  const handlePivotDrag = (field: string, target: 'rows' | 'columns' | 'values') => {\r\n    setConfig({\r\n      ...config,\r\n      rows: config.rows.filter((f) => f !== field),\r\n      columns: config.columns.filter((f) => f !== field),\r\n      values: config.values.filter((f) => f !== field),\r\n      [target]: [...config[target], field]\r\n    });\r\n  };\r\n\r\n  const removeField = (field: string, target: 'rows' | 'columns' | 'values') => {\r\n      setConfig({\r\n          ...config,\r\n          [target]: config[target].filter((f) => f !== field)\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-full bg-[#F5F5F7] dark:bg-[#1e1e1e]\">\r\n      {/* Config Sidebar */}\r\n      <div className=\"w-64 border-r border-gray-200 dark:border-[#333] flex flex-col bg-white dark:bg-[#252525] overflow-y-auto p-4\">\r\n        <h3 className=\"text-xs font-bold uppercase text-gray-400 mb-4 tracking-wider\">Pivot Settings</h3>\r\n\r\n        <div className=\"mb-6\">\r\n          <p className=\"text-xs font-semibold mb-2 text-gray-700 dark:text-gray-200\">Fields</p>\r\n          <div className=\"flex flex-col gap-1.5\">\r\n            {headers.map((h) => (\r\n              <div\r\n                key={h}\r\n                draggable\r\n                onDragStart={(e) => e.dataTransfer.setData('field', h)}\r\n                className=\"px-3 py-2 bg-white dark:bg-[#333] border border-gray-200 dark:border-[#444] rounded-md text-xs cursor-grab active:cursor-grabbing shadow-sm hover:bg-gray-50 dark:hover:bg-[#383838] flex items-center justify-between transition-all\"\r\n              >\r\n                <span>{h}</span>\r\n                <Grid size={12} className=\"text-gray-400\" />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {['rows', 'columns', 'values'].map((area) => (\r\n          <div\r\n            key={area}\r\n            className=\"mb-4 min-h-[80px] border border-dashed border-gray-300 dark:border-[#444] rounded-lg bg-gray-50/50 dark:bg-[#2a2a2a]\"\r\n            onDragOver={(e) => e.preventDefault()}\r\n            onDrop={(e) => {\r\n              const f = e.dataTransfer.getData('field');\r\n              if (f) handlePivotDrag(f, area as any);\r\n            }}\r\n          >\r\n            <div className=\"px-3 py-1.5 border-b border-gray-200 dark:border-[#444]\">\r\n              <p className=\"text-[10px] uppercase text-gray-500 font-bold\">{area}</p>\r\n            </div>\r\n            <div className=\"p-2 flex flex-col gap-1.5\">\r\n              {(config as any)[area].map((f: string) => (\r\n                <div\r\n                  key={f}\r\n                  className=\"flex justify-between items-center px-2.5 py-1.5 bg-white dark:bg-[#333] text-xs border border-gray-200 dark:border-[#444] rounded-md shadow-sm\"\r\n                >\r\n                  <span>{f}</span>\r\n                  <X\r\n                    size={12}\r\n                    className=\"cursor-pointer text-gray-400 hover:text-red-500\"\r\n                    onClick={() => removeField(f, area as any)}\r\n                  />\r\n                </div>\r\n              ))}\r\n              {(config as any)[area].length === 0 && (\r\n                <span className=\"text-[10px] text-gray-400 italic p-1 text-center\">Drop here</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        <div className=\"mt-2 mb-6\">\r\n          <label className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">Aggregation</label>\r\n          <select\r\n            className=\"w-full mt-1 p-2 text-xs bg-white dark:bg-[#333] border border-gray-200 dark:border-[#444] rounded-md outline-none shadow-sm\"\r\n            value={config.aggregation}\r\n            onChange={(e) => setConfig({ ...config, aggregation: e.target.value as any })}\r\n          >\r\n            <option value=\"sum\">Sum</option>\r\n            <option value=\"count\">Count</option>\r\n            <option value=\"average\">Average</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"mt-auto pt-4 border-t border-gray-200 dark:border-[#333] space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <label className=\"flex items-center gap-2 text-xs font-medium text-gray-700 dark:text-gray-300 cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showLabels}\r\n                onChange={(e) => setShowLabels(e.target.checked)}\r\n                className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n              />\r\n              Show Labels\r\n            </label>\r\n          </div>\r\n\r\n          <div>\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Palette size={12} className=\"text-gray-400\" />\r\n              <span className=\"text-xs font-bold text-gray-400 uppercase\">Theme</span>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              {Object.keys(COLOR_THEMES).map((color) => (\r\n                <button\r\n                  key={color}\r\n                  onClick={() => setThemeColor(color)}\r\n                  className={`w-5 h-5 rounded-full transition-all ${\r\n                    themeColor === color ? 'ring-2 ring-offset-1 ring-gray-400' : 'hover:scale-110'\r\n                  }`}\r\n                  style={{ backgroundColor: COLOR_THEMES[color][0] }}\r\n                  title={color}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Result Area */}\r\n      <div className=\"flex-1 overflow-auto p-8 bg-[#F5F5F7] dark:bg-[#1e1e1e]\">\r\n        <div className=\"bg-white dark:bg-[#252525] border border-gray-200 dark:border-[#444] shadow-sm rounded-xl overflow-hidden min-h-[300px]\">\r\n          {pivotResult ? (\r\n            <table className=\"w-full border-collapse text-sm\">\r\n              <thead>\r\n                <tr\r\n                  className=\"border-b border-gray-200 dark:border-[#444]\"\r\n                  style={{ backgroundColor: COLOR_THEMES[themeColor][0] }}\r\n                >\r\n                  <th className=\"p-3 text-left font-semibold text-white border-r border-white/10\">\r\n                    {config.rows.join(' > ') || 'Total'}\r\n                  </th>\r\n                  {pivotResult.columns.map((c) => (\r\n                    <th key={c} className=\"p-3 font-semibold text-white border-r border-white/10 min-w-[100px]\">\r\n                      {c}\r\n                    </th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {pivotResult.data.map((row, i) => (\r\n                  <tr\r\n                    key={i}\r\n                    className=\"hover:bg-gray-50 dark:hover:bg-[#2f2f2f] border-b border-gray-100 dark:border-[#444]\"\r\n                  >\r\n                    <td className=\"p-3 font-medium text-gray-900 dark:text-white border-r border-gray-100 dark:border-[#444]\">\r\n                      {row.name}\r\n                    </td>\r\n                    {pivotResult.columns.map((c) => (\r\n                      <td\r\n                        key={c}\r\n                        className=\"p-3 text-right font-mono text-gray-600 dark:text-gray-400 border-r border-gray-100 dark:border-[#444]\"\r\n                      >\r\n                        {row[c]}\r\n                        {showLabels && <span className=\"ml-1 text-[9px] text-gray-400\">({row[c]})</span>}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            <div className=\"h-[300px] flex flex-col items-center justify-center text-gray-400\">\r\n              <TableIcon size={48} strokeWidth={1} className=\"mb-4 opacity-20\" />\r\n              <p className=\"text-sm font-medium\">Configure pivot to see results</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4126, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/utils/imageHelpers.ts"],"sourcesContent":["\r\nexport const downloadSvgAsPng = (svgElement: SVGElement, fileName: string) => {\r\n  try {\r\n    const serializer = new XMLSerializer();\r\n    const svgString = serializer.serializeToString(svgElement);\r\n    \r\n    // Create a canvas\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    \r\n    // Get dimensions from SVG or use bounding rect\r\n    const rect = svgElement.getBoundingClientRect();\r\n    const width = rect.width * 2; // 2x for Retina/High Res\r\n    const height = rect.height * 2;\r\n    \r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    \r\n    const img = new Image();\r\n    const svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });\r\n    const url = URL.createObjectURL(svgBlob);\r\n    \r\n    img.onload = () => {\r\n      if (ctx) {\r\n        // White background\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.fillRect(0, 0, width, height);\r\n        \r\n        // Draw image\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        \r\n        // Download\r\n        const pngUrl = canvas.toDataURL('image/png');\r\n        const link = document.createElement('a');\r\n        link.href = pngUrl;\r\n        link.download = fileName.endsWith('.png') ? fileName : `${fileName}.png`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        \r\n        URL.revokeObjectURL(url);\r\n      }\r\n    };\r\n    \r\n    img.src = url;\r\n  } catch (error) {\r\n    console.error('Failed to download image', error);\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;AACO,MAAM,mBAAmB,CAAC,YAAwB;IACvD,IAAI;QACF,MAAM,aAAa,IAAI;QACvB,MAAM,YAAY,WAAW,iBAAiB,CAAC;QAE/C,kBAAkB;QAClB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,MAAM,MAAM,OAAO,UAAU,CAAC;QAE9B,+CAA+C;QAC/C,MAAM,OAAO,WAAW,qBAAqB;QAC7C,MAAM,QAAQ,KAAK,KAAK,GAAG,GAAG,yBAAyB;QACvD,MAAM,SAAS,KAAK,MAAM,GAAG;QAE7B,OAAO,KAAK,GAAG;QACf,OAAO,MAAM,GAAG;QAEhB,MAAM,MAAM,IAAI;QAChB,MAAM,UAAU,IAAI,KAAK;YAAC;SAAU,EAAE;YAAE,MAAM;QAA8B;QAC5E,MAAM,MAAM,IAAI,eAAe,CAAC;QAEhC,IAAI,MAAM,GAAG;YACX,IAAI,KAAK;gBACP,mBAAmB;gBACnB,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO;gBAE1B,aAAa;gBACb,IAAI,SAAS,CAAC,KAAK,GAAG,GAAG,OAAO;gBAEhC,WAAW;gBACX,MAAM,SAAS,OAAO,SAAS,CAAC;gBAChC,MAAM,OAAO,SAAS,aAAa,CAAC;gBACpC,KAAK,IAAI,GAAG;gBACZ,KAAK,QAAQ,GAAG,SAAS,QAAQ,CAAC,UAAU,WAAW,GAAG,SAAS,IAAI,CAAC;gBACxE,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC1B,KAAK,KAAK;gBACV,SAAS,IAAI,CAAC,WAAW,CAAC;gBAE1B,IAAI,eAAe,CAAC;YACtB;QACF;QAEA,IAAI,GAAG,GAAG;IACZ,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;IAC5C;AACF","debugId":null}},
    {"offset": {"line": 4181, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/table/views/VisualsView.tsx"],"sourcesContent":["\r\n\r\nimport React from 'react';\r\nimport { Download, PieChart } from 'lucide-react';\r\nimport {\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\r\n  PieChart as RePieChart, Pie, Cell, Legend, LineChart, Line, LabelList\r\n} from 'recharts';\r\nimport { downloadSvgAsPng } from '../../../utils/imageHelpers';\r\nimport { COLOR_THEMES } from '../types';\r\n\r\ninterface VisualsConfig {\r\n  chartType: 'bar' | 'pie' | 'line';\r\n  themeColor: string;\r\n}\r\n\r\ninterface VisualsViewProps {\r\n  headers: string[];\r\n  rows: any[];\r\n  fileName: string;\r\n  config: VisualsConfig;\r\n  setConfig: (config: VisualsConfig) => void;\r\n}\r\n\r\nexport const VisualsView: React.FC<VisualsViewProps> = ({ headers, rows, fileName, config, setConfig }) => {\r\n  const { chartType, themeColor } = config;\r\n  const [showLabels, setShowLabels] = React.useState(false);\r\n\r\n  const getChartData = () => {\r\n    if (rows.length > 0) {\r\n      // Simple heuristic: Use first string col as label, all number cols as values\r\n      const labelKey = headers.find((h) => typeof rows[0][h] === 'string') || headers[0];\r\n      const valueKeys = headers.filter((h) => typeof rows[0][h] === 'number');\r\n      if (valueKeys.length > 0) {\r\n        return { data: rows, keys: valueKeys, labelKey };\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const chartDataInfo = getChartData();\r\n\r\n  const handleDownloadVisual = () => {\r\n    const svg = document.querySelector('.recharts-wrapper svg');\r\n    if (svg) {\r\n      downloadSvgAsPng(svg as SVGElement, `${fileName}_visual.png`);\r\n    }\r\n  };\r\n\r\n  if (!chartDataInfo) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center text-gray-400 bg-[#F5F5F7] dark:bg-[#1e1e1e]\">\r\n        <PieChart size={48} strokeWidth={1} className=\"mb-4 opacity-20\" />\r\n        <p>Visuals require numeric data.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { data: chartData, keys: dataKeys, labelKey } = chartDataInfo;\r\n  const colors = COLOR_THEMES[themeColor];\r\n\r\n  return (\r\n    <div className=\"h-full p-8 bg-[#F5F5F7] dark:bg-[#1e1e1e] overflow-y-auto flex flex-col\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-1 p-1 bg-white dark:bg-[#252525] rounded-lg border border-gray-200 dark:border-[#444] shadow-sm\">\r\n            {['bar', 'line', 'pie'].map((type) => (\r\n              <button\r\n                key={type}\r\n                onClick={() => setConfig({ ...config, chartType: type as any })}\r\n                className={`px-4 py-1.5 text-xs font-medium rounded-md transition-all uppercase tracking-wide ${\r\n                  chartType === type\r\n                    ? 'bg-gray-100 dark:bg-[#333] text-black dark:text-white'\r\n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200'\r\n                }`}\r\n              >\r\n                {type}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex items-center gap-1.5 px-2 py-1.5 bg-white dark:bg-[#252525] rounded-lg border border-gray-200 dark:border-[#444] shadow-sm\">\r\n            {Object.keys(COLOR_THEMES).map((color) => (\r\n              <button\r\n                key={color}\r\n                onClick={() => setConfig({ ...config, themeColor: color })}\r\n                className={`w-3 h-3 rounded-full transition-all ${\r\n                  themeColor === color ? 'scale-125 ring-1 ring-gray-400' : ''\r\n                }`}\r\n                style={{ backgroundColor: COLOR_THEMES[color][0] }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleDownloadVisual}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#252525] border border-gray-200 dark:border-[#444] rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-[#333] shadow-sm transition-colors text-xs font-medium\"\r\n        >\r\n          <Download size={14} />\r\n          Download PNG\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex-1 min-h-[300px] max-h-[600px] bg-white dark:bg-[#252525] p-8 border border-gray-200 dark:border-[#444] shadow-sm rounded-2xl relative\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          {chartType === 'bar' ? (\r\n            <BarChart data={chartData} margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#F2F2F7\" />\r\n              <XAxis\r\n                dataKey={labelKey}\r\n                tick={{ fontSize: 11, fill: '#8E8E93' }}\r\n                axisLine={false}\r\n                tickLine={false}\r\n                dy={10}\r\n              />\r\n              <YAxis tick={{ fontSize: 11, fill: '#8E8E93' }} axisLine={false} tickLine={false} />\r\n              <Tooltip\r\n                cursor={{ fill: 'transparent' }}\r\n                contentStyle={{\r\n                  borderRadius: '12px',\r\n                  border: 'none',\r\n                  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\r\n                }}\r\n              />\r\n              <Legend wrapperStyle={{ paddingTop: '20px' }} />\r\n              {dataKeys.map((key, i) => (\r\n                <Bar\r\n                  key={key}\r\n                  dataKey={key}\r\n                  fill={colors[i % colors.length]}\r\n                  radius={[6, 6, 0, 0]}\r\n                  barSize={40}\r\n                >\r\n                  {showLabels && (\r\n                    <LabelList\r\n                      dataKey={key}\r\n                      position=\"top\"\r\n                      style={{ fontSize: '10px', fill: '#666' }}\r\n                    />\r\n                  )}\r\n                </Bar>\r\n              ))}\r\n            </BarChart>\r\n          ) : chartType === 'line' ? (\r\n            <LineChart data={chartData} margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#F2F2F7\" />\r\n              <XAxis\r\n                dataKey={labelKey}\r\n                tick={{ fontSize: 11, fill: '#8E8E93' }}\r\n                axisLine={false}\r\n                tickLine={false}\r\n                dy={10}\r\n              />\r\n              <YAxis tick={{ fontSize: 11, fill: '#8E8E93' }} axisLine={false} tickLine={false} />\r\n              <Tooltip\r\n                contentStyle={{\r\n                  borderRadius: '12px',\r\n                  border: 'none',\r\n                  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\r\n                }}\r\n              />\r\n              <Legend wrapperStyle={{ paddingTop: '20px' }} />\r\n              {dataKeys.map((key, i) => (\r\n                <Line\r\n                  key={key}\r\n                  type=\"monotone\"\r\n                  dataKey={key}\r\n                  stroke={colors[i % colors.length]}\r\n                  strokeWidth={3}\r\n                  dot={{ r: 4, strokeWidth: 0 }}\r\n                  activeDot={{ r: 6 }}\r\n                />\r\n              ))}\r\n            </LineChart>\r\n          ) : (\r\n            <RePieChart>\r\n              <Pie\r\n                data={chartData}\r\n                dataKey={dataKeys[0]}\r\n                nameKey={labelKey}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                innerRadius={100}\r\n                outerRadius={140}\r\n                paddingAngle={4}\r\n                cornerRadius={6}\r\n              >\r\n                {chartData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={colors[index % colors.length]} strokeWidth={0} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip\r\n                contentStyle={{\r\n                  borderRadius: '12px',\r\n                  border: 'none',\r\n                  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\r\n                }}\r\n              />\r\n              <Legend />\r\n            </RePieChart>\r\n          )}\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4616, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/table/views/NotebookView.tsx"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Sparkles, Printer, RefreshCw, Download, FileText, FileCode } from 'lucide-react';\r\nimport { GoogleGenAI } from '@google/genai';\r\nimport {\r\n  ResponsiveContainer, BarChart, Bar, LineChart, Line, AreaChart, Area,\r\n  PieChart as RePieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend\r\n} from 'recharts';\r\nimport { generatePivot } from '../../../utils/tableUtils';\r\nimport { downloadSvgAsPng } from '../../../utils/imageHelpers';\r\nimport { NotebookReport, NotebookBlock, COLOR_THEMES } from '../types';\r\n\r\ninterface NotebookViewProps {\r\n  headers: string[];\r\n  rows: any[];\r\n  fileName: string;\r\n  triggerOnMount?: boolean;\r\n  report: NotebookReport | null;\r\n  setReport: (report: NotebookReport | null) => void;\r\n}\r\n\r\n// Helper Component for Markdown\r\nconst NotebookMarkdown = ({ content }: { content: string }) => {\r\n  const lines = content.split('\\n');\r\n  const parseBold = (text: string) => {\r\n    const parts = text.split(/(\\*\\*.*?\\*\\*)/g);\r\n    return parts.map((part, index) => {\r\n      if (part.startsWith('**') && part.endsWith('**')) {\r\n        return <strong key={index} className=\"font-semibold text-gray-900 dark:text-white\">{part.slice(2, -2)}</strong>;\r\n      }\r\n      return part;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2 text-sm\">\r\n      {lines.map((line, i) => {\r\n        const trimmed = line.trim();\r\n        if (trimmed === '---') return <hr key={i} className=\"my-6 border-gray-200 dark:border-[#333]\" />;\r\n        if (line.startsWith('# ')) return <h1 key={i} className=\"text-xl font-bold text-gray-900 dark:text-white mt-6 mb-3\">{line.replace('# ', '')}</h1>;\r\n        if (line.startsWith('## ')) return <h2 key={i} className=\"text-lg font-bold text-gray-900 dark:text-white mt-5 mb-2\">{line.replace('## ', '')}</h2>;\r\n        if (line.startsWith('### ')) return <h3 key={i} className=\"text-base font-bold text-gray-900 dark:text-white mt-4 mb-2\">{line.replace('### ', '')}</h3>;\r\n        if (line.startsWith('- ')) return <div key={i} className=\"flex gap-2 ml-2\"><span className=\"text-gray-400\"></span><span className=\"text-gray-700 dark:text-gray-300\">{parseBold(line.replace('- ', ''))}</span></div>;\r\n        if (trimmed === '') return <div key={i} className=\"h-2\" />;\r\n        return <p key={i} className=\"text-gray-700 dark:text-gray-300 leading-relaxed\">{parseBold(line)}</p>;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotebookView: React.FC<NotebookViewProps> = ({ headers, rows, fileName, triggerOnMount, report, setReport }) => {\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const themeColor = 'blue'; // Default theme\r\n\r\n  useEffect(() => {\r\n    if (triggerOnMount && !report && rows.length > 0) {\r\n      triggerAnalysis();\r\n    }\r\n  }, [triggerOnMount, rows]);\r\n\r\n  const triggerAnalysis = async () => {\r\n    if (rows.length === 0) return;\r\n    setIsAnalyzing(true);\r\n    try {\r\n      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n      \r\n      // Generate Data Profile\r\n      const profile: any = {};\r\n      headers.slice(0, 8).forEach((h) => { // Limit to first 8 cols to save tokens\r\n        const sampleVal = rows.find((r) => r[h] !== null && r[h] !== undefined)?.[h];\r\n        if (typeof sampleVal === 'number') {\r\n          const vals = rows.map((r) => Number(r[h])).filter((n) => !isNaN(n));\r\n          if (vals.length) {\r\n            const min = Math.min(...vals);\r\n            const max = Math.max(...vals);\r\n            const avg = vals.reduce((a, b) => a + b, 0) / vals.length;\r\n            profile[h] = { type: 'number', min, max, avg: avg.toFixed(2) };\r\n          }\r\n        } else {\r\n          const vals = rows.map((r) => String(r[h]));\r\n          const unique = new Set(vals).size;\r\n          const counts = vals.reduce((acc: any, v) => { acc[v] = (acc[v] || 0) + 1; return acc; }, {});\r\n          const top5 = Object.entries(counts).sort((a: any, b: any) => b[1] - a[1]).slice(0, 5);\r\n          profile[h] = { type: 'string', unique, top5 };\r\n        }\r\n      });\r\n\r\n      const prompt = `\r\n        You are an expert data analyst creating a comprehensive \"Data Notebook\" report.\r\n        DATA PROFILE: ${JSON.stringify(profile)}\r\n\r\n        TASK: Create a structured analysis notebook JSON with a title, summary, and a linear sequence of blocks.\r\n        The analysis MUST follow this strict chapter structure:\r\n        1. Dataset Overview (Row counts, structure, quality)\r\n        2. Distributions (Histograms/Bars of key numeric fields)\r\n        3. Categorical Breakdown (Pie/Bar charts of categories)\r\n        4. Time-Series Trends (Lines/Areas if dates exist, else skip)\r\n        5. Correlation Analysis (Scatter descriptions or Bar charts of relationships)\r\n        6. Marketing Metrics (If applicable: conversion, cost, sales, ROI)\r\n        7. Anomaly Detection (Highlight outliers or weird patterns)\r\n        8. Final Recommendations (Actionable bullet points)\r\n\r\n        RULES:\r\n        - Never place two \"chart\" blocks back-to-back. Always separate them with a \"text\" block providing narrative/context.\r\n        - \"text\" blocks should use Markdown (use # for Chapter Titles, ## for sections, **bold** for emphasis).\r\n        - \"chart\" blocks must have valid 'xAxis' and 'yAxis' from the data headers provided in the profile.\r\n        - If a chapter is not applicable (e.g. no dates for time-series), skip it gracefully.\r\n\r\n        Response JSON format:\r\n        {\r\n          \"title\": string,\r\n          \"summary\": string,\r\n          \"blocks\": [\r\n            { \"type\": \"text\", \"content\": string },\r\n            { \"type\": \"stat\", \"statLabel\": string, \"statValue\": string, \"trend\": \"up\"|\"down\"|\"neutral\" },\r\n            { \"type\": \"chart\", \"title\": string, \"chartType\": \"bar\"|\"line\"|\"pie\"|\"area\", \"xAxis\": string, \"yAxis\": string, \"aggregation\": \"sum\"|\"count\"|\"average\", \"explanation\": string }\r\n          ]\r\n        }\r\n      `;\r\n\r\n      const response = await ai.models.generateContent({\r\n        model: 'gemini-2.5-flash',\r\n        contents: prompt,\r\n        config: { responseMimeType: 'application/json' }\r\n      });\r\n\r\n      const json = JSON.parse(response.text || '{}');\r\n      if (json.title && json.blocks) {\r\n        setReport(json);\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Analysis failed\", e);\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  const aggregateForChart = (xAxis: string, yAxis: string, aggType: 'sum' | 'count' | 'average' = 'sum') => {\r\n    const result = generatePivot(rows, {\r\n      rows: [xAxis],\r\n      columns: [],\r\n      values: [yAxis],\r\n      aggregation: aggType,\r\n    });\r\n    return result ? result.data : [];\r\n  };\r\n\r\n  const handleDownloadChartPng = (index: number, title: string) => {\r\n    const container = document.getElementById(`chart-block-${index}`);\r\n    // Use robust selector to target Recharts wrapper SVG only, ignoring button icons\r\n    const svg = container?.querySelector('.recharts-wrapper svg');\r\n    if (svg) {\r\n      downloadSvgAsPng(svg as SVGElement, `${title.replace(/\\s+/g, '_')}.png`);\r\n    } else {\r\n      console.error(\"Could not find chart SVG in block\", index);\r\n    }\r\n  };\r\n\r\n  const getChartBase64 = async (index: number): Promise<string | null> => {\r\n    const container = document.getElementById(`chart-block-${index}`);\r\n    // Use robust selector here as well\r\n    const svg = container?.querySelector('.recharts-wrapper svg');\r\n    if (!svg) return null;\r\n\r\n    const serializer = new XMLSerializer();\r\n    const svgString = serializer.serializeToString(svg);\r\n    \r\n    return new Promise((resolve) => {\r\n        const img = new Image();\r\n        // Encode the SVG string to be safe for data URI\r\n        const svgBlob = new Blob([svgString], {type: 'image/svg+xml;charset=utf-8'});\r\n        const url = URL.createObjectURL(svgBlob);\r\n        \r\n        img.onload = () => {\r\n            const canvas = document.createElement('canvas');\r\n            // Use bounding rect to determine size, multiplying by 2 for high DPI\r\n            const rect = svg.getBoundingClientRect();\r\n            const width = rect.width > 0 ? rect.width * 2 : 800;\r\n            const height = rect.height > 0 ? rect.height * 2 : 600;\r\n\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            \r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n                ctx.fillStyle = '#ffffff';\r\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n                resolve(canvas.toDataURL('image/png'));\r\n            } else {\r\n                resolve(null);\r\n            }\r\n            URL.revokeObjectURL(url);\r\n        };\r\n        img.onerror = () => {\r\n            console.error(\"Failed to load SVG image for export\");\r\n            URL.revokeObjectURL(url);\r\n            resolve(null);\r\n        }\r\n        img.src = url;\r\n    });\r\n  };\r\n\r\n  const handleExport = async (format: 'html' | 'md') => {\r\n    if (!report) return;\r\n    setIsExporting(true);\r\n\r\n    try {\r\n        let content = '';\r\n        const timestamp = new Date().toLocaleDateString();\r\n\r\n        if (format === 'html') {\r\n            content = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>${report.title}</title>\r\n    <style>\r\n        body { font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; max-w-width: 900px; margin: 0 auto; padding: 40px; color: #333; }\r\n        h1 { font-size: 2.5em; margin-bottom: 10px; color: #111; }\r\n        h2 { margin-top: 40px; border-bottom: 1px solid #eee; padding-bottom: 10px; color: #222; }\r\n        h3 { margin-top: 25px; color: #444; }\r\n        p { margin-bottom: 15px; color: #555; }\r\n        .stat-grid { display: flex; gap: 20px; margin: 30px 0; flex-wrap: wrap; }\r\n        .stat-card { background: #f9f9f9; padding: 20px; border-radius: 12px; border: 1px solid #eee; min-width: 150px; }\r\n        .stat-label { font-size: 12px; text-transform: uppercase; color: #777; font-weight: 600; letter-spacing: 0.5px; }\r\n        .stat-value { font-size: 24px; font-weight: 700; color: #111; margin-top: 5px; }\r\n        .chart-container { margin: 40px 0; padding: 30px; border: 1px solid #eee; border-radius: 12px; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }\r\n        .chart-img { width: 100%; height: auto; display: block; border-radius: 4px; }\r\n        .summary { background: #f0f9ff; padding: 25px; border-radius: 12px; color: #0c4a6e; margin-bottom: 40px; line-height: 1.8; }\r\n        .explanation { font-style: italic; color: #666; margin-bottom: 15px; display: block; }\r\n    </style>\r\n</head>\r\n<body>\r\n    <h1>${report.title}</h1>\r\n    <p style=\"color: #666; font-size: 0.9em;\">Generated on ${timestamp}</p>\r\n    \r\n    <div class=\"summary\">\r\n        <strong>Executive Summary</strong><br/>\r\n        ${report.summary}\r\n    </div>\r\n            `;\r\n        } else {\r\n            content = `# ${report.title}\\n\\nGenerated on: ${timestamp}\\n\\n**Executive Summary**\\n\\n${report.summary}\\n\\n---\\n\\n`;\r\n        }\r\n\r\n        // Iterate blocks\r\n        for (let i = 0; i < report.blocks.length; i++) {\r\n            const block = report.blocks[i];\r\n            \r\n            if (block.type === 'text') {\r\n                const text = block.content || '';\r\n                if (format === 'html') {\r\n                    // Simple markdown-ish parser for HTML export\r\n                    let htmlText = text\r\n                        .replace(/^# (.*$)/gm, '<h1>$1</h1>')\r\n                        .replace(/^## (.*$)/gm, '<h2>$1</h2>')\r\n                        .replace(/^### (.*$)/gm, '<h3>$1</h3>')\r\n                        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n                        .replace(/\\n/g, '<br/>');\r\n                    content += `<div class=\"text-block\">${htmlText}</div>`;\r\n                } else {\r\n                    content += `${text}\\n\\n`;\r\n                }\r\n            } \r\n            else if (block.type === 'stat') {\r\n                if (format === 'html') {\r\n                    content += `\r\n                    <div class=\"stat-grid\">\r\n                        <div class=\"stat-card\">\r\n                            <div class=\"stat-label\">${block.statLabel}</div>\r\n                            <div class=\"stat-value\">${block.statValue}</div>\r\n                        </div>\r\n                    </div>`;\r\n                } else {\r\n                    content += `**${block.statLabel}**: ${block.statValue}\\n\\n`;\r\n                }\r\n            }\r\n            else if (block.type === 'chart') {\r\n                // Capture chart\r\n                const base64 = await getChartBase64(i);\r\n                if (base64) {\r\n                    if (format === 'html') {\r\n                        content += `\r\n                        <div class=\"chart-container\">\r\n                            <h3>${block.title}</h3>\r\n                            <span class=\"explanation\">${block.explanation}</span>\r\n                            <img src=\"${base64}\" class=\"chart-img\" alt=\"${block.title}\" />\r\n                        </div>`;\r\n                    } else {\r\n                        content += `### ${block.title}\\n\\n*${block.explanation}*\\n\\n![${block.title}](${base64})\\n\\n`;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (format === 'html') {\r\n            content += `</body></html>`;\r\n            const blob = new Blob([content], { type: 'text/html' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${fileName}_notebook.html`;\r\n            a.click();\r\n        } else {\r\n            const blob = new Blob([content], { type: 'text/markdown' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${fileName}_notebook.md`;\r\n            a.click();\r\n        }\r\n\r\n    } catch (e) {\r\n        console.error(\"Export failed\", e);\r\n    } finally {\r\n        setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const renderBlock = (block: NotebookBlock, index: number) => {\r\n    if (block.type === 'text') {\r\n      return <div key={index} className=\"mb-6\"><NotebookMarkdown content={block.content || ''} /></div>;\r\n    }\r\n    if (block.type === 'chart') {\r\n      const chartData = block.xAxis && block.yAxis ? aggregateForChart(block.xAxis, block.yAxis, block.aggregation) : [];\r\n      if (!chartData.length) return null;\r\n      const colors = COLOR_THEMES[themeColor];\r\n      const ChartComponent = block.chartType === 'line' ? LineChart : block.chartType === 'pie' ? RePieChart : block.chartType === 'area' ? AreaChart : BarChart;\r\n\r\n      return (\r\n        <div key={index} id={`chart-block-${index}`} className=\"mb-8 bg-white dark:bg-[#252525] p-6 rounded-2xl border border-gray-100 dark:border-[#333] shadow-sm break-inside-avoid\">\r\n          <div className=\"flex justify-between items-start mb-4\">\r\n            <div>\r\n              <h4 className=\"font-semibold text-gray-900 dark:text-white text-lg\">{block.title}</h4>\r\n              {block.explanation && <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1 max-w-xl\">{block.explanation}</p>}\r\n            </div>\r\n            <button onClick={() => handleDownloadChartPng(index, block.title || 'chart')} className=\"text-xs font-medium text-blue-600 flex items-center gap-1 bg-blue-50 px-2 py-1 rounded hover:bg-blue-100 transition-colors\">\r\n              <Download size={12} /> PNG\r\n            </button>\r\n          </div>\r\n          <div className=\"h-[250px] md:h-[300px] w-full\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n               {block.chartType === 'pie' ? (\r\n                 <RePieChart>\r\n                    <Pie data={chartData} dataKey=\"Total\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" innerRadius={60} outerRadius={100} paddingAngle={4}>\r\n                        {chartData.map((_, idx) => <Cell key={`cell-${idx}`} fill={colors[idx % colors.length]} strokeWidth={0} />)}\r\n                    </Pie>\r\n                    <Tooltip />\r\n                    <Legend />\r\n                 </RePieChart>\r\n               ) : (\r\n                 <ChartComponent data={chartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#eee\" />\r\n                    <XAxis dataKey=\"name\" tick={{ fontSize: 11 }} axisLine={false} tickLine={false} />\r\n                    <YAxis tick={{ fontSize: 11 }} axisLine={false} tickLine={false} />\r\n                    <Tooltip />\r\n                    {block.chartType === 'line' ? (\r\n                         <Line type=\"monotone\" dataKey=\"Total\" stroke={colors[0]} strokeWidth={3} dot={{r:4}} />\r\n                    ) : block.chartType === 'area' ? (\r\n                         <Area type=\"monotone\" dataKey=\"Total\" stroke={colors[0]} fill={colors[0]} fillOpacity={0.3} />\r\n                    ) : (\r\n                         <Bar dataKey=\"Total\" fill={colors[0]} radius={[4, 4, 0, 0]} />\r\n                    )}\r\n                 </ChartComponent>\r\n               )}\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-full bg-[#F5F5F7] dark:bg-[#1e1e1e]\">\r\n      <div className=\"flex-1 p-4 md:p-8 overflow-y-auto\">\r\n        <div className=\"max-w-3xl mx-auto\">\r\n          {isAnalyzing ? (\r\n            <div className=\"flex flex-col items-center justify-center py-20 gap-6\">\r\n              <div className=\"w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin\"></div>\r\n              <p className=\"text-sm text-gray-500 font-medium animate-pulse\">Analyzing data & generating chapters...</p>\r\n            </div>\r\n          ) : report ? (\r\n            <div className=\"animate-in fade-in duration-500 pb-20\">\r\n              <div className=\"mb-8 pb-6 border-b border-gray-200 dark:border-[#333]\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                   <div className=\"flex items-center gap-2 text-xs font-bold text-blue-600 uppercase\"><Sparkles size={12} /><span>AI Analysis</span></div>\r\n                   <div className=\"flex gap-2\">\r\n                      <button \r\n                        onClick={() => handleExport('html')} \r\n                        disabled={isExporting}\r\n                        className=\"flex items-center gap-2 text-xs font-medium bg-white dark:bg-[#333] dark:text-white px-3 py-1.5 rounded-full border dark:border-[#444] shadow-sm hover:bg-gray-50 dark:hover:bg-[#404040] transition-colors disabled:opacity-50\"\r\n                      >\r\n                        {isExporting ? <RefreshCw size={12} className=\"animate-spin\" /> : <FileCode size={12} />}\r\n                        HTML\r\n                      </button>\r\n                      <button \r\n                        onClick={() => handleExport('md')} \r\n                        disabled={isExporting}\r\n                        className=\"flex items-center gap-2 text-xs font-medium bg-white dark:bg-[#333] dark:text-white px-3 py-1.5 rounded-full border dark:border-[#444] shadow-sm hover:bg-gray-50 dark:hover:bg-[#404040] transition-colors disabled:opacity-50\"\r\n                      >\r\n                        {isExporting ? <RefreshCw size={12} className=\"animate-spin\" /> : <FileText size={12} />}\r\n                        Markdown\r\n                      </button>\r\n                   </div>\r\n                </div>\r\n                <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-3\">{report.title}</h1>\r\n                <p className=\"text-lg text-gray-500\">{report.summary}</p>\r\n              </div>\r\n              <div className=\"flex flex-wrap gap-4 mb-8\">\r\n                  {report.blocks.filter(b => b.type === 'stat').map((b, i) => (\r\n                      <div key={i} className=\"p-5 bg-white dark:bg-[#2a2a2a] rounded-2xl border border-gray-100 dark:border-[#333] min-w-[160px] shadow-sm flex-1 md:flex-none\">\r\n                          <span className=\"text-xs text-gray-500 uppercase font-semibold tracking-wider\">{b.statLabel}</span>\r\n                          <div className=\"flex items-end gap-2 mt-2\">\r\n                              <span className=\"text-3xl font-bold text-gray-900 dark:text-white\">{b.statValue}</span>\r\n                              {b.trend && (\r\n                                <span className={`text-xs font-medium px-1.5 py-0.5 rounded ${\r\n                                    b.trend === 'up' ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400' : \r\n                                    b.trend === 'down' ? 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400' : \r\n                                    'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\r\n                                }`}>\r\n                                    {b.trend === 'up' ? '' : b.trend === 'down' ? '' : ''}\r\n                                </span>\r\n                              )}\r\n                          </div>\r\n                      </div>\r\n                  ))}\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                   {report.blocks.filter(b => b.type !== 'stat').map((b, i) => renderBlock(b, i))}\r\n              </div>\r\n              <div className=\"mt-12 pt-6 border-t border-gray-200 dark:border-[#333] flex justify-between\">\r\n                 <span className=\"text-gray-400 text-xs font-medium\">Generated for {fileName}</span>\r\n                 <button onClick={triggerAnalysis} className=\"flex items-center gap-2 text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline\"><RefreshCw size={12} /> Regenerate Analysis</button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"h-[400px] flex flex-col items-center justify-center text-center p-8\">\r\n                <div className=\"w-16 h-16 bg-white dark:bg-[#333] rounded-full flex items-center justify-center mb-4 text-blue-500 shadow-sm border border-gray-100 dark:border-[#333]\"><Sparkles size={24} /></div>\r\n                <h3 className=\"text-xl font-semibold mb-2 text-gray-900 dark:text-white\">AI Data Notebook</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-6 max-w-md\">Generate a comprehensive report with specific chapters: Overview, Distributions, Trends, Correlations, and Recommendations.</p>\r\n                <button onClick={triggerAnalysis} className=\"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-full shadow-lg hover:scale-105 transition-all\">Generate Report</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5593, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/table/TableDrawer.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\r\nimport { TableData } from '../../types/chat';\r\nimport { Grid, Settings2, PieChart, Sparkles, Table as TableIcon, X, Check } from 'lucide-react';\r\nimport { DataGridView } from './views/DataGridView';\r\nimport { PivotView } from './views/PivotView';\r\nimport { VisualsView } from './views/VisualsView';\r\nimport { NotebookView } from './views/NotebookView';\r\nimport { PivotConfig } from '../../utils/tableUtils';\r\nimport { NotebookReport } from './types';\r\n\r\ninterface TableDrawerProps {\r\n  isOpen: boolean;\r\n  data: TableData | null;\r\n  fileName: string;\r\n  visualHint?: string;\r\n  onClose: () => void;\r\n  onSave: (newData: TableData) => void;\r\n  mode?: 'fixed' | 'inline';\r\n}\r\n\r\nexport const TableDrawer: React.FC<TableDrawerProps> = ({\r\n  isOpen,\r\n  data,\r\n  fileName,\r\n  visualHint,\r\n  onClose,\r\n  onSave,\r\n  mode = 'fixed',\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState<'data' | 'pivot' | 'visuals' | 'analysis'>('data');\r\n  const [lastSaved, setLastSaved] = useState<Date | null>(null);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n\r\n  // Data State\r\n  const [rows, setRows] = useState<any[]>([]);\r\n  const [headers, setHeaders] = useState<string[]>([]);\r\n\r\n  // View States\r\n  const [filters, setFilters] = useState<Record<string, string>>({});\r\n  const [sortConfig, setSortConfig] = useState<{ key: string; dir: 'asc' | 'desc' } | null>(null);\r\n  const [pivotConfig, setPivotConfig] = useState<PivotConfig>({\r\n    rows: [], columns: [], values: [], aggregation: 'sum'\r\n  });\r\n  const [visualsConfig, setVisualsConfig] = useState<{ chartType: 'bar' | 'pie' | 'line', themeColor: string }>({\r\n    chartType: 'bar', themeColor: 'blue'\r\n  });\r\n  const [notebookReport, setNotebookReport] = useState<NotebookReport | null>(null);\r\n\r\n  const saveTimerRef = useRef<any>(null);\r\n  const lastUpdateRef = useRef<string>('');\r\n\r\n  // Initialize once or when forced externally\r\n  useEffect(() => {\r\n    if (data) {\r\n      const dataHash = JSON.stringify({ h: data.headers, rCount: data.rows.length });\r\n      // Only reset if it's a completely different dataset, not a silent autosave update from parent\r\n      if (lastUpdateRef.current !== dataHash) {\r\n        setRows(data.rows);\r\n        setHeaders(data.headers);\r\n        lastUpdateRef.current = dataHash;\r\n      }\r\n\r\n      if (data.metadata) {\r\n        if (data.metadata.filters) setFilters(data.metadata.filters);\r\n        if (data.metadata.sortConfig) setSortConfig(data.metadata.sortConfig);\r\n        if (data.metadata.pivotConfig) setPivotConfig(data.metadata.pivotConfig);\r\n        if (data.metadata.visualsConfig) setVisualsConfig(data.metadata.visualsConfig);\r\n        if (data.metadata.notebookReport) setNotebookReport(data.metadata.notebookReport);\r\n      }\r\n      if (visualHint && ['bar', 'pie', 'line'].includes(visualHint)) {\r\n        setActiveTab('visuals');\r\n        setVisualsConfig(prev => ({ ...prev, chartType: visualHint as any }));\r\n      }\r\n    }\r\n  }, [data, visualHint]);\r\n\r\n  // Persist logic - Silent background save\r\n  const persistState = useCallback(() => {\r\n    const metadata = {\r\n      pivotConfig,\r\n      visualsConfig,\r\n      notebookReport,\r\n      filters,\r\n      sortConfig\r\n    };\r\n    onSave({ headers, rows, metadata });\r\n    setLastSaved(new Date());\r\n  }, [headers, rows, pivotConfig, visualsConfig, notebookReport, filters, sortConfig, onSave]);\r\n\r\n  // 3-second Autosave Effect - Truly in the background\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (saveTimerRef.current) clearTimeout(saveTimerRef.current);\r\n\r\n    saveTimerRef.current = setTimeout(() => {\r\n      persistState();\r\n    }, 3000);\r\n\r\n    return () => {\r\n      if (saveTimerRef.current) clearTimeout(saveTimerRef.current);\r\n    };\r\n  }, [rows, pivotConfig, visualsConfig, filters, sortConfig, isOpen, persistState]);\r\n\r\n  const handleRowUpdate = useCallback((id: string, updates: Record<string, any>) => {\r\n    setRows(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\r\n  }, []);\r\n\r\n  const handleAddRow = useCallback(() => {\r\n    const newRow: any = { id: `row-${Date.now()}` };\r\n    headers.forEach(h => newRow[h] = '');\r\n    setRows(prev => [...prev, newRow]);\r\n  }, [headers]);\r\n\r\n  const handleDeleteRow = useCallback((id: string) => {\r\n    setRows(prev => prev.filter(r => r.id !== id));\r\n  }, []);\r\n\r\n  const processedRows = useMemo(() => {\r\n    let res = [...rows];\r\n    Object.keys(filters).forEach((key) => {\r\n      const val = filters[key].toLowerCase();\r\n      if (val) res = res.filter((r) => r[key]?.toString().toLowerCase().includes(val));\r\n    });\r\n    if (sortConfig) {\r\n      res.sort((a, b) => {\r\n        const av = a[sortConfig.key];\r\n        const bv = b[sortConfig.key];\r\n        if (av < bv) return sortConfig.dir === 'asc' ? -1 : 1;\r\n        if (av > bv) return sortConfig.dir === 'asc' ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }\r\n    return res;\r\n  }, [rows, filters, sortConfig]);\r\n\r\n  const containerClasses = mode === 'inline'\r\n    ? 'w-full h-full flex flex-col bg-white dark:bg-[#1e1e1e] overflow-hidden'\r\n    : `fixed inset-y-0 right-0 z-[60] w-[95vw] md:w-[90vw] lg:w-[1200px] bg-white dark:bg-[#1e1e1e] shadow-2xl transform transition-transform duration-300 ease-in-out border-l border-gray-200 dark:border-[#333] flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`;\r\n\r\n  if (mode === 'inline' && !isOpen) return null;\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"h-14 flex items-center justify-between px-6 flex-shrink-0 bg-white/80 dark:bg-[#1e1e1e]/80 backdrop-blur-md border-b border-gray-200 dark:border-[#333] z-10\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center justify-center w-8 h-8 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-blue-600 dark:text-blue-400 shadow-sm\">\r\n            <TableIcon size={18} />\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <h2 className=\"text-sm font-medium text-gray-900 dark:text-white tracking-tight\">{fileName}</h2>\r\n            <div className=\"flex items-center gap-1.5\">\r\n              <span className=\"text-[9px] font-medium uppercase tracking-widest text-gray-400\">\r\n                {lastSaved ? `Autosaved ${lastSaved.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}` : 'Live Workspace'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"hidden md:flex bg-gray-100 dark:bg-[#2a2a2a] p-1 rounded-xl\">\r\n          {[\r\n            { id: 'data', label: 'Grid', icon: Grid },\r\n            { id: 'pivot', label: 'Pivot', icon: Settings2 },\r\n            { id: 'visuals', label: 'Chart', icon: PieChart },\r\n            { id: 'analysis', label: 'Notebook', icon: Sparkles },\r\n          ].map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id as any)}\r\n              className={`flex items-center gap-2 px-4 py-1.5 text-[11px] font-medium uppercase tracking-wider rounded-lg transition-all duration-300 ${activeTab === tab.id\r\n                  ? 'bg-white dark:bg-[#333] text-gray-900 dark:text-white shadow-sm'\r\n                  : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200'\r\n                }`}\r\n            >\r\n              <tab.icon size={13} strokeWidth={2} />\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={persistState}\r\n            className=\"flex items-center gap-2 px-5 py-1.5 bg-black dark:bg-white text-white dark:text-black text-xs font-medium rounded-full hover:opacity-80 transition-all active:scale-95 shadow-sm\"\r\n          >\r\n            Save\r\n          </button>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-gray-400 hover:text-black dark:hover:text-white hover:bg-gray-100 dark:hover:bg-[#333] rounded-full transition-all\"\r\n          >\r\n            <X size={18} strokeWidth={2} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-hidden relative bg-[#F5F5F7] dark:bg-[#1e1e1e]\">\r\n        {activeTab === 'data' && (\r\n          <DataGridView\r\n            headers={headers}\r\n            rows={processedRows}\r\n            onRowUpdate={handleRowUpdate}\r\n            onAddRow={handleAddRow}\r\n            onDeleteRow={handleDeleteRow}\r\n            filters={filters}\r\n            setFilters={setFilters}\r\n            sortConfig={sortConfig}\r\n            setSortConfig={setSortConfig}\r\n          />\r\n        )}\r\n        {activeTab === 'pivot' && (\r\n          <PivotView\r\n            headers={headers}\r\n            rows={processedRows}\r\n            config={pivotConfig}\r\n            setConfig={setPivotConfig}\r\n          />\r\n        )}\r\n        {activeTab === 'visuals' && (\r\n          <VisualsView\r\n            headers={headers}\r\n            rows={processedRows}\r\n            fileName={fileName}\r\n            config={visualsConfig}\r\n            setConfig={setVisualsConfig}\r\n          />\r\n        )}\r\n        {activeTab === 'analysis' && (\r\n          <NotebookView\r\n            headers={headers}\r\n            rows={processedRows}\r\n            fileName={fileName}\r\n            report={notebookReport}\r\n            setReport={setNotebookReport}\r\n            triggerOnMount={!notebookReport}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6032, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/chat/ContextSuggestions.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ContextSuggestionsProps {\r\n  suggestions: string[];\r\n  onSelect: (suggestion: string) => void;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const ContextSuggestions: React.FC<ContextSuggestionsProps> = ({ suggestions, onSelect, isLoading }) => {\r\n  if (suggestions.length === 0 && !isLoading) return null;\r\n\r\n  return (\r\n    <div className=\"w-full max-w-3xl mx-auto px-4 mb-2\">\r\n      <div className=\"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1 fade-in-up\">\r\n        {isLoading ? (\r\n          // Loading skeletons\r\n          <div className=\"flex gap-2 w-full\">\r\n             {[1, 2, 3].map(i => (\r\n               <div key={i} className=\"h-8 w-24 bg-gray-100 dark:bg-[#2f2f2f] rounded-full animate-pulse\" />\r\n             ))}\r\n          </div>\r\n        ) : (\r\n          suggestions.map((suggestion, idx) => (\r\n            <button\r\n              key={idx}\r\n              onClick={() => onSelect(suggestion)}\r\n              className=\"\r\n                flex-shrink-0 px-4 py-2 \r\n                bg-white dark:bg-[#2a2a2a] \r\n                border border-gray-200 dark:border-[#333] \r\n                rounded-full text-xs font-medium \r\n                text-gray-500 dark:text-gray-400 \r\n                hover:bg-gray-50 dark:hover:bg-[#333] \r\n                hover:text-gray-900 dark:hover:text-white \r\n                hover:border-gray-300 dark:hover:border-[#555] \r\n                transition-all duration-200 shadow-sm hover:shadow-md\r\n                animate-in slide-in-from-bottom-2 fade-in fill-mode-both whitespace-nowrap\r\n              \"\r\n              style={{ animationDelay: `${idx * 100}ms` }}\r\n            >\r\n              {suggestion}\r\n            </button>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAQO,MAAM,qBAAwD,CAAC,EAAE,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE;IACxG,IAAI,YAAY,MAAM,KAAK,KAAK,CAAC,WAAW,OAAO;IAEnD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACZ,YACC,oBAAoB;0BACpB,6LAAC;gBAAI,WAAU;0BACX;oBAAC;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAA,kBACb,6LAAC;wBAAY,WAAU;uBAAb;;;;;;;;;uBAIf,YAAY,GAAG,CAAC,CAAC,YAAY,oBAC3B,6LAAC;oBAEC,SAAS,IAAM,SAAS;oBACxB,WAAU;oBAYV,OAAO;wBAAE,gBAAgB,GAAG,MAAM,IAAI,EAAE,CAAC;oBAAC;8BAEzC;mBAhBI;;;;;;;;;;;;;;;AAuBnB;KAvCa","debugId":null}},
    {"offset": {"line": 6096, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/components/NewChat.tsx"],"sourcesContent":["/**\r\n * NewChat.tsx\r\n * \r\n * Purpose: \r\n * The core chat interface manager. It handles:\r\n * 1. Multi-tab chat sessions (NewChat component).\r\n * 2. Individual chat session logic (ChatSession component).\r\n * 3. File drag-and-drop for data analysis.\r\n * 4. Integration with the Table Drawer for data visualization.\r\n * \r\n * Outline:\r\n * - ChatSession: Renders a single active chat context, managing messages, inputs, and AI interactions.\r\n * - NewChat: Manages the list of active chat tabs and the shared TableDrawer state.\r\n */\r\n\r\n'use client';\r\n\r\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { useChatSession } from '../hooks/useChatSession';\r\nimport { useVoiceSession } from '../hooks/useVoiceSession';\r\nimport { MODELS } from '../constants/chat';\r\nimport { EmptyState } from './chat/EmptyState';\r\nimport { MessageItem } from './chat/MessageItem';\r\nimport { InputArea } from './chat/InputArea';\r\nimport { VoiceOverlay } from './chat/VoiceOverlay';\r\nimport { TableDrawer } from './table/TableDrawer';\r\nimport { ContextSuggestions } from './chat/ContextSuggestions';\r\nimport { Attachment, TableData } from '../types/chat';\r\nimport { Plus, X, GripVertical, Upload } from 'lucide-react';\r\nimport { GoogleGenAI } from '@google/genai';\r\nimport { fileToDataUrl } from '../utils/fileHelpers';\r\nimport { parseCSV, parseJSON } from '../utils/tableUtils';\r\n\r\n// --- Chat Session Component ---\r\ninterface ChatSessionProps {\r\n    id: string;\r\n    isActive: boolean;\r\n    onTitleChange: (id: string, newTitle: string) => void;\r\n    onExpandTable: (data: TableData, fileName: string, visualHint?: string, msgId?: string) => void;\r\n    initialData?: { name: string; data: TableData; source?: string };\r\n    lastDrawerUpdate?: { data: TableData; msgId?: string };\r\n}\r\n\r\n/**\r\n * ChatSession\r\n * \r\n * Represents a single conversation thread.\r\n * Handles:\r\n * - Message history (via useChatSession)\r\n * - File attachments (drag & drop)\r\n * - Voice input (via useVoiceSession)\r\n * - Auto-titling of new chats\r\n */\r\nconst ChatSession: React.FC<ChatSessionProps> = ({ id, isActive, onTitleChange, onExpandTable, initialData, lastDrawerUpdate }) => {\r\n    const [query, setQuery] = useState('');\r\n    const [selectedModel, setSelectedModel] = useState(MODELS[0]);\r\n    const [useSearch, setUseSearch] = useState(false);\r\n    const [isAnalyzeMode, setIsAnalyzeMode] = useState(false);\r\n    const [attachments, setAttachments] = useState<Attachment[]>([]);\r\n    const [hasRenamed, setHasRenamed] = useState(false);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const endRef = useRef<HTMLDivElement>(null);\r\n\r\n    const hasIngestedData = useRef(false);\r\n\r\n    const chat = useChatSession({ selectedModel, useSearch, isAnalyzeMode });\r\n    const voice = useVoiceSession();\r\n\r\n    // Sync drawer updates back to chat messages without triggering a full remount\r\n    useEffect(() => {\r\n        if (lastDrawerUpdate && lastDrawerUpdate.msgId) {\r\n            chat.setMessages(prev => prev.map(m => {\r\n                if (m.id === lastDrawerUpdate.msgId) {\r\n                    // Shallow compare to avoid unnecessary nested updates\r\n                    if (m.executionResults?.[0]?.data === lastDrawerUpdate.data) return m;\r\n\r\n                    if (m.executionResult && m.executionResult.type === 'table') {\r\n                        return { ...m, executionResult: { ...m.executionResult, data: lastDrawerUpdate.data } };\r\n                    }\r\n                    if (m.executionResults) {\r\n                        const updatedResults = { ...m.executionResults };\r\n                        if (updatedResults[0]) updatedResults[0] = { ...updatedResults[0], data: lastDrawerUpdate.data };\r\n                        return { ...m, executionResults: updatedResults };\r\n                    }\r\n                }\r\n                return m;\r\n            }));\r\n        }\r\n    }, [lastDrawerUpdate]);\r\n\r\n    // Initialize with data if provided (e.g. from \"Ask AI\" on a dataset)\r\n    useEffect(() => {\r\n        if (initialData && !hasIngestedData.current) {\r\n            hasIngestedData.current = true;\r\n            setIsAnalyzeMode(true);\r\n            const attachment: Attachment = {\r\n                file: new File([], initialData.name),\r\n                name: initialData.name,\r\n                previewUrl: '',\r\n                base64: '',\r\n                mimeType: 'application/json',\r\n                size: 0,\r\n                tableData: initialData.data\r\n            };\r\n            chat.handleSend(\r\n                `I have loaded the dataset \"${initialData.name}\". Please review the columns and act as a consultant. Do not run a full analysis yet. Instead, propose 4-5 specific analysis options based on the data structure and ask me what I would like to focus on.`,\r\n                [attachment]\r\n            );\r\n            onTitleChange(id, `Analysis: ${initialData.name}`);\r\n            setHasRenamed(true);\r\n        }\r\n    }, [initialData, chat, id, onTitleChange]);\r\n\r\n    // Scroll to bottom when new messages arrive or when switching back to this tab\r\n    useEffect(() => {\r\n        if (isActive) {\r\n            endRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n        }\r\n    }, [chat.messages, chat.isGenerating, isActive]);\r\n\r\n    // Auto-Summarize Title using Gemini\r\n    useEffect(() => {\r\n        const generateTitle = async () => {\r\n            if (chat.messages.length >= 2 && !hasRenamed && !initialData) {\r\n                const userMsg = chat.messages[0];\r\n                const modelMsg = chat.messages[1];\r\n                if (userMsg.role === 'user' && modelMsg.role === 'model' && !modelMsg.isStreaming) {\r\n                    setHasRenamed(true);\r\n                    try {\r\n                        const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n                        const response = await ai.models.generateContent({\r\n                            model: 'gemini-3-flash-preview',\r\n                            contents: `Summarize this user query into a very short title (max 3 words). No quotes. Text: \"${userMsg.text}\"`,\r\n                        });\r\n                        const title = response.text?.trim();\r\n                        if (title) onTitleChange(id, title);\r\n                    } catch (e) {\r\n                        onTitleChange(id, userMsg.text.slice(0, 20) + '...');\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        generateTitle();\r\n    }, [chat.messages, hasRenamed, id, onTitleChange, initialData]);\r\n\r\n    const handleSuggestion = (prompt: string, modelId: string) => {\r\n        setQuery(prompt);\r\n        const model = MODELS.find(m => m.id === modelId);\r\n        if (model) setSelectedModel(model);\r\n    };\r\n\r\n    const handleSend = async () => {\r\n        const currentQuery = query;\r\n        const currentAttachments = attachments;\r\n        setQuery('');\r\n        setAttachments([]);\r\n        await chat.handleSend(currentQuery, currentAttachments);\r\n    };\r\n\r\n    // Drag and drop handlers\r\n    const handleDragOver = useCallback((e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(true);\r\n    }, []);\r\n\r\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        if (!e.currentTarget.contains(e.relatedTarget as Node)) {\r\n            setIsDragging(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleDrop = useCallback(async (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n            const files = Array.from(e.dataTransfer.files);\r\n            const newAttachments = await Promise.all(files.map(async (f: File) => {\r\n                const base64 = await fileToDataUrl(f);\r\n                let tableData = undefined;\r\n                if (f.type === 'text/csv' || f.name.endsWith('.csv')) tableData = parseCSV(await f.text());\r\n                else if (f.type === 'application/json' || f.name.endsWith('.json')) tableData = parseJSON(await f.text());\r\n                if (tableData) setIsAnalyzeMode(true);\r\n                return { file: f, previewUrl: base64, base64, mimeType: f.type, name: f.name, size: f.size, tableData };\r\n            }));\r\n            setAttachments(prev => [...prev, ...newAttachments]);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div\r\n            className={`flex-col h-full relative bg-white dark:bg-[#212121] w-full ${isActive ? 'flex' : 'hidden'}`}\r\n            onDragOver={handleDragOver}\r\n            onDragLeave={handleDragLeave}\r\n            onDrop={handleDrop}\r\n        >\r\n            {isDragging && (\r\n                <div className=\"absolute inset-0 z-50 bg-white/80 dark:bg-black/80 backdrop-blur-[2px] flex items-center justify-center transition-all duration-200 pointer-events-none p-10\">\r\n                    <div className=\"w-full h-full border-2 border-dashed border-indigo-500 rounded-3xl flex flex-col items-center justify-center bg-indigo-50/10\">\r\n                        <div className=\"w-20 h-20 rounded-3xl bg-white dark:bg-[#1e1e1e] shadow-2xl flex items-center justify-center mb-6\">\r\n                            <Upload size={32} className=\"text-indigo-600\" strokeWidth={2} />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold text-gray-900 dark:text-white tracking-tight\">Drop data to analyze</h3>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {voice.isActive && (\r\n                <VoiceOverlay status={voice.status} audioLevel={voice.audioLevel} isMuted={voice.isMuted} onClose={voice.stopSession} onToggleMic={voice.toggleMic} />\r\n            )}\r\n\r\n            <div className=\"flex-1 overflow-y-auto no-scrollbar flex flex-col items-center p-4 pb-24 w-full\">\r\n                {chat.messages.length === 0 ? (\r\n                    <EmptyState onSuggestionClick={handleSuggestion} />\r\n                ) : (\r\n                    <div className=\"w-full flex flex-col pb-4\">\r\n                        {chat.messages.map(msg => (\r\n                            <MessageItem\r\n                                key={msg.id}\r\n                                msg={msg}\r\n                                onRerun={chat.handleRerun}\r\n                                onFeedback={chat.toggleFeedback}\r\n                                onExpandTable={(data, name, hint) => onExpandTable(data, name, hint, msg.id)}\r\n                            />\r\n                        ))}\r\n                        {chat.isGenerating && chat.messages[chat.messages.length - 1]?.role === 'user' && (\r\n                            <div className=\"max-w-3xl mx-auto px-4 py-6 w-full flex justify-start\">\r\n                                <div className=\"flex items-center gap-2 text-gray-500 dark:text-gray-400 px-2\">\r\n                                    <div className=\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce\" />\r\n                                    <div className=\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce delay-100\" />\r\n                                    <div className=\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce delay-200\" />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div ref={endRef} />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"w-full z-10 bg-white dark:bg-[#212121]\">\r\n                <ContextSuggestions suggestions={chat.suggestions} onSelect={(s) => chat.handleSend(s, [])} isLoading={chat.isSuggestionsLoading} />\r\n                <InputArea\r\n                    query={query} setQuery={setQuery} onSend={handleSend} isGenerating={chat.isGenerating} onStartVoice={voice.startSession}\r\n                    selectedModel={selectedModel} setSelectedModel={setSelectedModel} useSearch={useSearch} setUseSearch={setUseSearch}\r\n                    isAnalyzeMode={isAnalyzeMode} setIsAnalyzeMode={setIsAnalyzeMode} attachments={attachments} setAttachments={setAttachments}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Main Tab Manager ---\r\n/**\r\n * NewChat Component\r\n * \r\n * Manages multiple ChatSession tabs and the shared TableDrawer.\r\n */\r\nexport const NewChat = ({ onChatUpdate, selectedChatId, incomingDataset, onClearIncomingDataset }: any) => {\r\n    const [tabs, setTabs] = useState<any[]>([{ id: '1', title: 'New Chat' }]);\r\n    const [activeTabId, setActiveTabId] = useState('1');\r\n    const [tabData, setTabData] = useState<Record<string, any>>({});\r\n    const [drawerUpdate, setDrawerUpdate] = useState<Record<string, { data: TableData, msgId?: string }>>({});\r\n\r\n    const [draggedTabIndex, setDraggedTabIndex] = useState<number | null>(null);\r\n    const [hoveredTabId, setHoveredTabId] = useState<string | null>(null);\r\n\r\n    const [isTableDrawerOpen, setIsTableDrawerOpen] = useState(false);\r\n    const [activeTableData, setActiveTableData] = useState<TableData | null>(null);\r\n    const [activeTableName, setActiveTableName] = useState('');\r\n    const [activeVisualHint, setActiveVisualHint] = useState<string | undefined>(undefined);\r\n    const [activeMsgId, setActiveMsgId] = useState<string | undefined>(undefined);\r\n\r\n    const [drawerWidth, setDrawerWidth] = useState(600);\r\n    const resizerRef = useRef<any>(null);\r\n\r\n    const [editingTabId, setEditingTabId] = useState<string | null>(null);\r\n    const [editingTitle, setEditingTitle] = useState('');\r\n\r\n    const [isMobile, setIsMobile] = useState(false);\r\n\r\n    // Sync selected tab with global state selection\r\n    useEffect(() => {\r\n        const checkMobile = () => setIsMobile(window.innerWidth < 1024); // Matching sidebar breakpoint\r\n        checkMobile();\r\n        window.addEventListener('resize', checkMobile);\r\n        return () => window.removeEventListener('resize', checkMobile);\r\n    }, []);\r\n\r\n    // Sync selected tab with global state selection\r\n    useEffect(() => {\r\n        if (selectedChatId) setActiveTabId(selectedChatId);\r\n    }, [selectedChatId]);\r\n\r\n    // Handle incoming datasets (e.g. from file upload elsewhere)\r\n    useEffect(() => {\r\n        if (incomingDataset) {\r\n            const newId = Date.now().toString();\r\n            setTabs(prev => [...prev, { id: newId, title: incomingDataset.name }]);\r\n            setTabData(prev => ({ ...prev, [newId]: incomingDataset }));\r\n            setActiveTabId(newId);\r\n            onChatUpdate(newId, incomingDataset.name);\r\n            onClearIncomingDataset();\r\n        }\r\n    }, [incomingDataset]);\r\n\r\n    const handleExpandTable = useCallback((data: TableData, fileName: string, visualHint?: string, msgId?: string) => {\r\n        setActiveTableData(data);\r\n        setActiveTableName(fileName);\r\n        setActiveVisualHint(visualHint);\r\n        setActiveMsgId(msgId);\r\n        setIsTableDrawerOpen(true);\r\n    }, []);\r\n\r\n    const handleSaveTable = useCallback((newData: TableData) => {\r\n        // Use ref-like comparison logic in ChatSession to avoid unnecessary cycles\r\n        setDrawerUpdate(prev => ({ ...prev, [activeTabId]: { data: newData, msgId: activeMsgId } }));\r\n    }, [activeTabId, activeMsgId]);\r\n\r\n    const handleTitleSubmit = (id: string) => {\r\n        if (editingTitle.trim()) {\r\n            setTabs(tabs.map(t => t.id === id ? { ...t, title: editingTitle } : t));\r\n            onChatUpdate(id, editingTitle);\r\n        }\r\n        setEditingTabId(null);\r\n    };\r\n\r\n    // Tab reordering logic\r\n    const handleTabDragStart = (idx: number) => {\r\n        setDraggedTabIndex(idx);\r\n    };\r\n\r\n    const handleTabDragOver = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        e.dataTransfer.dropEffect = 'move';\r\n    };\r\n\r\n    const handleTabDrop = (idx: number) => {\r\n        if (draggedTabIndex === null || draggedTabIndex === idx) return;\r\n        const newTabs = [...tabs];\r\n        const [movedTab] = newTabs.splice(draggedTabIndex, 1);\r\n        newTabs.splice(idx, 0, movedTab);\r\n        setTabs(newTabs);\r\n        setDraggedTabIndex(null);\r\n    };\r\n\r\n    // Extracted resize logic for cleanliness\r\n    const handleMouseDown = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        resizerRef.current = { startX: e.clientX, startWidth: drawerWidth };\r\n\r\n        const move = (me: MouseEvent) => {\r\n            const newWidth = resizerRef.current.startWidth + (resizerRef.current.startX - me.clientX);\r\n            setDrawerWidth(Math.max(300, Math.min(window.innerWidth * 0.7, newWidth)));\r\n        };\r\n\r\n        const up = () => {\r\n            document.removeEventListener('mousemove', move);\r\n            document.removeEventListener('mouseup', up);\r\n        };\r\n\r\n        document.addEventListener('mousemove', move);\r\n        document.addEventListener('mouseup', up);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full w-full overflow-hidden bg-white dark:bg-[#212121] relative\">\r\n            {/* Tab Bar - Seamless Browser Style */}\r\n            <div className=\"h-14 bg-white dark:bg-[#212121] border-b border-gray-100 dark:border-[#2a2a2a] flex items-end px-4 z-20 flex-shrink-0\">\r\n                <div className=\"flex items-center h-full overflow-x-auto no-scrollbar gap-0\">\r\n                    {tabs.map((tab, idx) => (\r\n                        <div\r\n                            key={tab.id}\r\n                            className={`relative flex items-end h-[46px] ${draggedTabIndex === idx ? 'opacity-40' : ''}`}\r\n                            draggable\r\n                            onDragStart={() => handleTabDragStart(idx)}\r\n                            onDragOver={handleTabDragOver}\r\n                            onDrop={() => handleTabDrop(idx)}\r\n                            onMouseEnter={() => setHoveredTabId(tab.id)}\r\n                            onMouseLeave={() => setHoveredTabId(null)}\r\n                        >\r\n                            <div\r\n                                onClick={() => setActiveTabId(tab.id)}\r\n                                onDoubleClick={() => {\r\n                                    setEditingTabId(tab.id);\r\n                                    setEditingTitle(tab.title);\r\n                                }}\r\n                                className={`\r\n                                    group relative h-[38px] flex items-center gap-3 cursor-pointer outline-none transition-all duration-300 ease-in-out\r\n                                    ${activeTabId === tab.id\r\n                                        ? 'text-black dark:text-white font-semibold bg-white dark:bg-[#212121] tab-active rounded-t-xl z-20 px-8 border-t border-x border-gray-100 dark:border-white/5 mb-[-1px]'\r\n                                        : 'text-gray-500 dark:text-gray-400 font-medium hover:text-gray-700 dark:hover:text-gray-200 px-6 z-10 tab-inactive rounded-t-lg h-[34px] mb-1'}\r\n                                `}\r\n                            >\r\n                                {/* Inactive shadow overlay for depth */}\r\n                                {activeTabId !== tab.id && <div className=\"tab-inactive-shadow\" />}\r\n\r\n                                {editingTabId === tab.id ? (\r\n                                    <input\r\n                                        autoFocus\r\n                                        value={editingTitle}\r\n                                        onChange={(e) => setEditingTitle(e.target.value)}\r\n                                        onBlur={() => handleTitleSubmit(tab.id)}\r\n                                        onKeyDown={(e) => e.key === 'Enter' && handleTitleSubmit(tab.id)}\r\n                                        className=\"bg-transparent border-none outline-none text-[11px] font-bold uppercase tracking-[0.15em] w-32 focus:ring-0\"\r\n                                        onClick={(e) => e.stopPropagation()}\r\n                                    />\r\n                                ) : (\r\n                                    <span className={`truncate text-[11px] font-bold uppercase tracking-[0.15em] transition-opacity duration-300 ${activeTabId === tab.id ? 'opacity-100' : 'opacity-60 group-hover:opacity-100'}`}>\r\n                                        {tab.title}\r\n                                    </span>\r\n                                )}\r\n\r\n                                {tabs.length > 1 && (activeTabId === tab.id || hoveredTabId === tab.id) && (\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); setTabs(tabs.filter(t => t.id !== tab.id)); }}\r\n                                        className={`\r\n                                            flex items-center justify-center w-5 h-5 rounded-full transition-all duration-200\r\n                                            bg-transparent hover:bg-gray-200/50 dark:hover:bg-white/10\r\n                                            text-gray-400 hover:text-gray-900 dark:hover:text-white\r\n                                            scale-90 hover:scale-100\r\n                                        `}\r\n                                    >\r\n                                        <X size={12} strokeWidth={2.5} />\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            {/* Seamless vertical separators for inactive tabs */}\r\n                            {activeTabId !== tab.id && activeTabId !== tabs[idx + 1]?.id && idx < tabs.length - 1 && (\r\n                                <div className=\"h-5 w-px bg-gray-300 dark:bg-gray-700/50 mb-3 mx-[-1px]\" />\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n\r\n                    <button\r\n                        onClick={() => { const id = Date.now().toString(); setTabs([...tabs, { id, title: 'New Chat' }]); setActiveTabId(id); }}\r\n                        className=\"flex items-center justify-center w-8 h-8 rounded-full text-[#667681] dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10 hover:text-black dark:hover:text-white transition-all duration-300 ml-2 mb-1\"\r\n                        title=\"New Chat\"\r\n                    >\r\n                        <Plus size={18} strokeWidth={2.5} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Chat Content Area */}\r\n            <div className=\"flex-1 flex overflow-hidden relative\">\r\n                <div className=\"flex-1 flex flex-col min-w-0 relative\">\r\n                    {tabs.map(tab => (\r\n                        <ChatSession\r\n                            key={tab.id} id={tab.id} isActive={activeTabId === tab.id}\r\n                            onTitleChange={(id, title) => { setTabs(tabs.map(t => t.id === id ? { ...t, title } : t)); onChatUpdate(id, title); }}\r\n                            onExpandTable={handleExpandTable} initialData={tabData[tab.id]}\r\n                            lastDrawerUpdate={drawerUpdate[tab.id]}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Resizable Table Drawer Side Panel (Desktop Split View) */}\r\n                {!isMobile && isTableDrawerOpen && (\r\n                    <>\r\n                        <div onMouseDown={handleMouseDown} className=\"w-1.5 h-full cursor-col-resize hover:bg-indigo-500 active:bg-indigo-600 bg-gray-200 dark:bg-[#333] z-30 flex-shrink-0 transition-colors\" />\r\n                        <div style={{ width: drawerWidth }} className=\"h-full flex-shrink-0 bg-white dark:bg-[#1e1e1e] shadow-2xl border-l border-gray-200 dark:border-[#333] overflow-hidden\">\r\n                            <TableDrawer isOpen={true} data={activeTableData} fileName={activeTableName} visualHint={activeVisualHint} onClose={() => setIsTableDrawerOpen(false)} onSave={handleSaveTable} mode=\"inline\" />\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* Mobile/Overlay Drawer */}\r\n            {isMobile && isTableDrawerOpen && (\r\n                <TableDrawer\r\n                    isOpen={true}\r\n                    data={activeTableData}\r\n                    fileName={activeTableName}\r\n                    visualHint={activeVisualHint}\r\n                    onClose={() => setIsTableDrawerOpen(false)}\r\n                    onSave={handleSaveTable}\r\n                    mode=\"fixed\"\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6920, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/girum/Downloads/New%20folder%20%284%29/Auxilary-Redesign/app/page.tsx"],"sourcesContent":["/**\r\n * app/page.tsx\r\n * \r\n * Purpose: \r\n * The main Home page of the application, rendering the default Chat interface.\r\n * \r\n * Outline:\r\n * - Page: Main server/client component.\r\n * - NewChat: Core chat component.\r\n */\r\n\r\n\"use client\";\r\nimport React from 'react';\r\nimport { NewChat } from '@/components/NewChat';\r\nimport { useApp } from '@/context/AppContext';\r\n\r\nexport default function Page() {\r\n    // Access global state for updating chat titles and handling shared datasets\r\n    const { updateChatTitle, incomingDataset, setIncomingDataset, selectedChatId } = useApp();\r\n\r\n    return (\r\n        <NewChat\r\n            onChatUpdate={updateChatTitle}\r\n            selectedChatId={selectedChatId}\r\n            incomingDataset={incomingDataset}\r\n            onClearIncomingDataset={() => setIncomingDataset(null)}\r\n        />\r\n    );\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;AAID;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,4EAA4E;IAC5E,MAAM,EAAE,eAAe,EAAE,eAAe,EAAE,kBAAkB,EAAE,cAAc,EAAE,GAAG,CAAA,GAAA,yHAAA,CAAA,SAAM,AAAD;IAEtF,qBACI,6LAAC,yHAAA,CAAA,UAAO;QACJ,cAAc;QACd,gBAAgB;QAChB,iBAAiB;QACjB,wBAAwB,IAAM,mBAAmB;;;;;;AAG7D;GAZwB;;QAE6D,yHAAA,CAAA,SAAM;;;KAFnE","debugId":null}}]
}